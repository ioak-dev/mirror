(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a(286)},144:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},176:function(e,t){},178:function(e,t){},214:function(e,t){},215:function(e,t){},282:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(61),s=a.n(o),i=(a(144),a(5)),l=a(6),c=a(9),u=a(7),m=a(8),p=a(25),h=a(31),f=a(134),d=a(13);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v={isAuth:!1,firstname:"",lastname:""};function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y={theme:"theme_light",tenant:""},O=Object(h.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AUTH":return console.log("GET_AUTH reducer"),b({},e);case"ADD_AUTH":return console.log("ADD_AUTH reducer"),b({},e,{},t.payload);case"REMOVE_AUTH":return console.log("REMOVE_AUTH reducer"),b({},e,{isAuth:!1,firstname:"",lastname:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return console.log("GET_PROFILE reducer"),w({},e);case"SET_PROFILE":return console.log("SET_PROFILE reducer"),w({},e,{},t.payload);default:return e}}}),j=[f.a],P=Object(h.e)(O,{},Object(h.d)(h.a.apply(void 0,j))),N=(a(88),a(149),a(150),a(22)),k=(a(151),a(82)),S=a.n(k),A=(a(152),a(290)),C=a(137),_=new A.a(""),T=new C.a,I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.onSubmit=function(e){e.preventDefault(),T.next(a.state.searchText)},a.handleChange=function(e){_.next(e.target.value)},a.state={searchText:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,_.subscribe(function(t){e._isMounted&&e.setState({searchText:t})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return r.a.createElement("form",{method:"GET",onSubmit:this.onSubmit,noValidate:!0},r.a.createElement("div",{className:"search-bar"+(this.props.alt?" alt":"")},r.a.createElement("input",{name:"searchText",spellCheck:!1,autoComplete:"off",autoFocus:!0,placeholder:"Mirror, mirror, on the wall, who's the fairest of them all?",required:!0,value:this.state.searchText,onChange:this.handleChange}),r.a.createElement("button",{className:"icon"},r.a.createElement("i",null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}))))))}}]),t}(n.Component),D=new C.a;function R(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;D.next({name:e,signal:t,data:a})}function U(){return D.asObservable()}var M=a(52),L=a.n(M),F="https://mirror-service.herokuapp.com";function z(e,t){return L.a.get(F+e,t)}function x(e,t,a){return L.a.post(F+e,t,a)}var B={API_URL_TENANT:"/tenant",API_URL_TENANT_BANNER:"/tenant/banner",API_URL_TENANT_CREATE:"/tenant/create",API_TENANT_URL:"/tenant/sendURL",API_URL_PRESIGNUP:"/auth/keys",API_URL_RESET:"/auth/reset",API_URL_CODE:"/auth/sendResetCode",API_URL_USER_DETAILS:"/user/details",API_URL:"/auth/",API_SIGNIN:"/signin",API_SIGNUP:"/signup",API_KEYS:"/keys",API_JWT:"/signin/jwt"};function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var G=10,H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleScroll=function(){var e=window.pageYOffset,t=e<G;a.state.showMainSearchBar!==t&&R("show-navbar-element",!t),a.setState({prevScrollpos:e,showMainSearchBar:t})},a.state={banner:null,prevScrollpos:window.pageYOffset,showMainSearchBar:!0,searchText:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",this.handleScroll),this.props.setProfile(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.props.profile,{tenant:this.props.match.params.tenant})),T.subscribe(function(t){e.setState({searchText:t})})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),R("show-navbar-element",!1),_.next("")}},{key:"componentWillReceiveProps",value:function(e){var t,a,n=this;e.authorization&&(t=this.props.match.params.tenant,a={headers:{Authorization:e.authorization.token}},z(B.API_URL_TENANT_BANNER+"/"+t,a).then(function(e){return Promise.resolve(e)})).then(function(e){200===e.status&&e.data?n.setState({banner:"data:image/jpeg;base64,"+e.data}):n.setState({banner:S.a})}).catch(function(){n.setState({banner:S.a})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home full"},r.a.createElement("div",{className:"cover"},r.a.createElement("img",{src:this.state.banner,alt:"Red dot"})),this.state.showMainSearchBar&&r.a.createElement(I,null),r.a.createElement("div",{className:"search-results"},r.a.createElement("br",null)," Search results goes here",r.a.createElement("br",null)," ",this.state.searchText)))}}]),t}(r.a.Component),Y=a(136),J=a(39),V=function(){return function(e){e({type:"GET_AUTH"})}},q=function(e){return function(t){t({type:"ADD_AUTH",payload:e})}},$=function(){return function(e){e({type:"REMOVE_AUTH"})}},K=a(26);a(169),a(170);var Q=function(e){return r.a.createElement("div",{className:"arc-text-field"},r.a.createElement("label",null,e.label),r.a.createElement("input",{autoComplete:"off",className:e.errorFields&&e.errorFields[e.id]?"error":"",type:e.type?e.type:"text",name:e.id,value:e.data[e.id],onChange:e.handleChange}))},X=a(83),Z=a.n(X),ee=a(84),te=a.n(ee);function ae(e){return z(B.API_URL+e.name+B.API_KEYS,null).then(function(e){return Promise.resolve(e)})}function ne(e,t){try{var a=(n=e.password,r=JSON.stringify(t),Z.a.decrypt(n,r));return x(B.API_URL+e.name+B.API_SIGNIN,{email:e.email,solution:a},null).then(function(e){return Promise.resolve(e)})}catch(o){return"ccm: tag doesn't match"===o.message?Promise.resolve({status:401}):Promise.resolve(o)}var n,r}function re(e,t,a){var n={cipher:"aes",iter:"12000",ks:256,salt:te.a.enc.Base64.stringify(te.a.enc.Utf8.parse(a))};return Z.a.encrypt(e,t,n)}function oe(e){return null===e||null!==e.match(/^ *$/)}function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var le=a(280),ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).loginViaJwt=function(e){var t;(t={tenantName:a.props.match.params.tenant,jwt:e},x(B.API_URL+t.tenantName+B.API_JWT,{jwtToken:t.jwt},null).then(function(e){return Promise.resolve(e)})).then(function(e){200===e.status?(R("notification",!0,{message:"Signed In successfully",type:"success",duration:3e3}),a.success(e.data)):500===e.status?R("notification",!0,{message:"Signature verification failed",type:"failure",duration:3e3}):R("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})}).catch(function(e){R("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})},a.login=function(e){var t;e.preventDefault(),R("notification",!1),R("spinner"),a.state.email&&a.state.password?(t={name:a.props.profile.tenant,email:a.state.email},z(B.API_URL+t.name+B.API_KEYS+"/"+t.email,null).then(function(e){return Promise.resolve(e)}).catch(function(e){return Promise.resolve(e.response)})).then(function(e){200===e.status?ne({name:a.props.profile.tenant,email:a.state.email,password:a.state.password},e.data).then(function(e){200===e.status?(R("notification",!0,{message:"Signed In successfully",type:"success",duration:3e3}),a.success(e.data)):401===e.status?R("notification",!0,{message:"Incorrect passphrase",type:"failure",duration:3e3}):R("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})}).catch(function(e){R("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}):404===e.status&&R("notification",!0,{message:"User name does not exist",type:"failure",duration:3e3})}):R("notification",!0,{type:"failure",message:"Username/password cannot be empty",duration:3e3})},a.signup=function(e){e.preventDefault();var t=Object(J.a)(a);if(R("notification",!1),R("spinner"),a.state.name&&a.state.password&&a.state.email){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a.state.email))return void R("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3});ae({name:t.props.profile.tenant}).then(function(e){var a;200===e.status&&(a={tenantName:t.props.profile.tenant,email:t.state.email,password:t.state.password,solution:e.data.solution,salt:e.data.salt},x(B.API_URL+a.tenantName+B.API_SIGNUP,{email:a.email,problem:re(a.password,a.solution,a.salt),solution:a.solution},null).then(function(e){return Promise.resolve(e.status)})).then(function(e){200===e&&(R("notification",!0,{type:"success",message:"Your account has been created. You can login now",duration:3e3}),t.setState({email:"",password:""}),t.toggle())}).catch(function(e){R("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})})}else a.state.name?a.state.email?a.state.password||R("notification",!0,{type:"failure",message:"Password cannot be empty",duration:3e3}):R("notification",!0,{type:"failure",message:"Email cannot be empty",duration:3e3}):R("notification",!0,{type:"failure",message:"Name cannot be empty",duration:3e3})},a.logout=function(){a.props.removeAuth(),a.props.cookies.remove("isAuth")},a.success=function(e){a.props.addAuth({isAuth:!0,token:e.token,secret:e.secret,name:e.name}),R("loggedin",!0),a.props.cookies.set("isAuth",!0),a.props.cookies.set("token",e.token),a.props.cookies.set("secret",e.secret),a.props.cookies.set("name",e.name),a.props.cookies.set("email",e.email),a.props.history.push("/")},a.toggle=function(){a.setState({newuser:!a.state.newuser})},a.handleChange=function(e){a.setState(ie({},a.state,Object(d.a)({},e.currentTarget.name,e.currentTarget.value)))},a.sentEmailWithCode=function(){oe(a.state.email)?R("notification",!0,{message:"Email cannot be empty",type:"failure",duration:5e3}):a.sentPasswordChangeEmail("password")},a.sentPasswordChangeEmail=function(e){var t,n=1+99*Math.random();(t={email:a.state.email,resetCode:n},x(B.API_URL_CODE,t,null).then(function(e){return Promise.resolve(e.status)})).then(function(t){200===t?"password"===e&&R("notification",!0,{message:"Password sent successfully",type:"success",duration:3e3}):R("notification",!0,{type:"failure",message:"Invalid Email error",duration:3e3})}).catch(function(e){R("notification",!0,{type:"failure",message:"Bad request",duration:3e3})})},a.state={newuser:!1,name:"",email:"",password:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=le.parse(this.props.location.search);e&&"signup"===e.type&&this.setState({newuser:!0}),e&&e.jwt&&this.loginViaJwt(e.jwt)}this.props.setProfile(ie({},this.props.profile,{tenant:this.props.match.params.tenant}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login"},!this.state.newuser&&r.a.createElement("div",{className:"container"},r.a.createElement("form",{method:"GET",onSubmit:this.login,noValidate:!0},r.a.createElement("div",{className:"form"},r.a.createElement(Q,{label:"E-mail",id:"email",data:this.state,handleChange:function(t){return e.handleChange(t)}}),r.a.createElement(Q,{label:"Password",type:"password",id:"password",data:this.state,handleChange:function(t){return e.handleChange(t)}})),r.a.createElement("br",null),r.a.createElement("button",{className:"primary animate out right",onClick:this.login},"Sign In"),r.a.createElement("br",null)," ",r.a.createElement("br",null),"Don't have an account? ",r.a.createElement("button",{className:"default animate right small",onClick:this.toggle},"Sign Up")),r.a.createElement("br",null),r.a.createElement("button",{className:"default animate right small",onClick:this.sentEmailWithCode},"Forgot password ?")),this.state.newuser&&r.a.createElement("div",{className:"container"},r.a.createElement("form",{method:"GET",onSubmit:this.signup,noValidate:!0},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"form"},r.a.createElement(Q,{label:"Name",id:"name",data:this.state,handleChange:function(t){return e.handleChange(t)}}),r.a.createElement(Q,{label:"E-mail",id:"email",data:this.state,handleChange:function(t){return e.handleChange(t)}}),r.a.createElement(Q,{label:"Password",type:"password",id:"password",data:this.state,handleChange:function(t){return e.handleChange(t)}}),r.a.createElement(Q,{label:"Repeat Password",type:"password",id:"repeatpassword",data:this.state,handleChange:function(t){return e.handleChange(t)}})),r.a.createElement("br",null),r.a.createElement("button",{className:"primary block",onClick:this.signup},"Create Account"),r.a.createElement("br",null)," ",r.a.createElement("br",null),"Already have an account? ",r.a.createElement("button",{className:"secondary block",onClick:this.toggle},"Sign In")))))}}]),t}(n.Component),ue=Object(p.b)(function(e){return{authorization:e.authorization}},{getAuth:V,addAuth:q,removeAuth:$})(Object(K.b)(ce)),me=(a(282),a(41)),pe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"space-bottom-4"},r.a.createElement("h3",null,"Mirror rorriM"),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," Magic Mirror on the wall, who now is the fairest one of all?"),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Magic Mirror"))," Over the seven jewelled hills, beyond the seventh fall, in the cottage of the seven dwarfs, dwells Snow White, fairest one of all."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," Snow White lies dead in the forest.  The huntsman has brought me proof. [holds up her opened box] Behold, her heart."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Magic Mirror"))," Snow White still lives, the fairest in the land. 'Tis the heart of a pig you hold in your hand."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," [repulsed] The heart of a pig?! Then I've been tricked!")),r.a.createElement("div",{className:"action"},r.a.createElement(me.a,{to:"/tenant",className:"navitem",activeClassName:"active"},r.a.createElement("button",{className:"primary animate out right"},"Create Tenant"))))}}]),t}(r.a.Component),he=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){!this.props.authorization.isAuth&&this.props.cookies.get("isAuth")&&this.props.addAuth({isAuth:!0,token:this.props.cookies.get("token"),secret:this.props.cookies.get("secret"),name:this.props.cookies.get("name")}),this.props.getAuth()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),t}(n.Component),fe=Object(p.b)(function(e){return{authorization:e.authorization}},{getAuth:V,addAuth:q,removeAuth:$})(Object(K.b)(he)),de=function(){return function(e){e({type:"GET_PROFILE"})}},ge=function(e){return function(t){t({type:"SET_PROFILE",payload:e})}},be=a(291),ve=a(292),Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={backdrop:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){U().subscribe(function(e){e.name})}},{key:"render",value:function(){return r.a.createElement("div",{className:this.state.backdrop})}}]),t}(n.Component),we=(a(284),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={spinner:!1,notification:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;U().subscribe(function(t){"notification"===t.name&&(t.signal?(e.setState({notification:t.data,spinner:!1}),t.data&&t.data.duration&&setTimeout(function(){R("notification",!1)},t.data.duration)):e.setState({notification:null})),"spinner"===t.name&&e.setState({spinner:t.signal})})}},{key:"processNextProps",value:function(e){e.event&&"spinner"===e.event.name&&this.setState({spinner:e.event.signal}),e.event&&"notification"===e.event.name&&(e.event.signal?(this.setState({notification:e.event.data,spinner:!1}),e.event.data.duration&&setTimeout(function(){},e.event.data.duration)):this.setState({notification:null}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.notification&&r.a.createElement("div",{className:"notification "+this.state.notification.type},r.a.createElement("div",{className:"message"},this.state.notification.message)),this.state.spinner&&r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}}]),t}(n.Component)),ye=(a(60),a(44)),Oe=a.n(ye),je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).toggleMenu=function(){a.setState({menu:!a.state.menu})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"links"},this.props.authorization.isAuth&&r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{to:"/"+this.props.profile.tenant+"/home",className:"navitem",activeClassName:"active"},"Home"),r.a.createElement(me.a,{to:"/"+this.props.profile.tenant+"/login",className:"navitem",activeClassName:"active"},"Login")))}}]),t}(n.Component),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).signin=function(e){a.props.login(e)},a.props.getProfile(),a.state={showSearchBar:!1,showSettings:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;U().subscribe(function(t){"show-navbar-element"===t.name&&e.setState({showSearchBar:t.signal})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.transparent?"navbar desktop transparent":"navbar desktop"},r.a.createElement("div",{className:"left"},!this.props.transparent&&"theme_light"===this.props.profile.theme&&r.a.createElement("img",{className:"logo",src:Oe.a,alt:"Curate logo"}),(this.props.transparent||"theme_dark"===this.props.profile.theme)&&r.a.createElement("img",{className:"logo",src:Oe.a,alt:"Curate logo"}),r.a.createElement(je,{authorization:this.props.authorization,profile:this.props.profile}),this.state.showSearchBar&&r.a.createElement(I,{alt:!0})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"action"},this.props.authorization.isAuth&&r.a.createElement("button",{className:"primary animate in alt right align-left small",onClick:this.props.toggleSettings},r.a.createElement("i",{className:"material-icons"},"brush"),"Action 1"),this.props.authorization.isAuth&&r.a.createElement("button",{className:"primary animate out alt right align-right small",onClick:this.props.logout()},r.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!this.props.authorization.isAuth&&r.a.createElement("button",{className:"primary animate in alt right align-left small",onClick:function(){return e.signin("signin")}},r.a.createElement("i",{className:"material-icons"},"person"),"Login"),!this.props.authorization.isAuth&&r.a.createElement("button",{className:"primary animate in alt right align-right small",onClick:function(){return e.signin("signup")}},r.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))))}}]),t}(n.Component),Ne=a(87),ke=a.n(Ne),Se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleMenu=function(){a.setState({menu:!a.state.menu})},a.signin=function(e){a.props.login(e)},a.props.getProfile(),a.state={showSearchBar:!1,menu:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;U().subscribe(function(t){"show-navbar-element"===t.name&&e.setState({showSearchBar:t.signal})})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.props.transparent?"navbar mobile transparent":"navbar mobile"},r.a.createElement("div",{className:"left"},!this.state.showSearchBar&&!this.props.transparent&&"theme_light"===this.props.profile.theme&&r.a.createElement("img",{className:"logo",src:Oe.a,alt:"Mirror logo"}),!this.state.showSearchBar&&(this.props.transparent||"theme_dark"===this.props.profile.theme)&&r.a.createElement("img",{className:"logo",src:Oe.a,alt:"Mirror logo"}),this.state.showSearchBar&&!this.props.transparent&&"theme_light"===this.props.profile.theme&&r.a.createElement("img",{className:"logo",src:ke.a,alt:"Mirror logo"}),this.state.showSearchBar&&(this.props.transparent||"theme_dark"===this.props.profile.theme)&&r.a.createElement("img",{className:"logo",src:ke.a,alt:"Mirror logo"}),this.state.showSearchBar&&r.a.createElement(I,{alt:!0})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:this.state.menu?"menu active":"menu",onClick:this.toggleMenu},r.a.createElement("div",null)))),r.a.createElement("div",{className:this.state.menu?"slider show":"slider hide",onClick:this.toggleMenu},r.a.createElement("div",{className:this.state.menu?"container":"container hidetext",onClick:this.toggleMenu},r.a.createElement("div",{className:"action"},r.a.createElement("div",{className:"settings-icon",onClick:this.props.toggleSettings},this.props.authorization.isAuth&&r.a.createElement("button",{className:"invert animate alt small",onClick:this.props.toggleSettings},r.a.createElement("i",{className:"material-icons"},"brush"),"Action 1")),r.a.createElement("div",{className:"buttons"},this.props.authorization.isAuth&&r.a.createElement("button",{className:"invert animate alt small",onClick:this.props.logout()},r.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!this.props.authorization.isAuth&&r.a.createElement("button",{className:"invert animate alt small left",onClick:function(){return e.signin("signin")}},r.a.createElement("i",{className:"material-icons"},"person"),"Login"),!this.props.authorization.isAuth&&r.a.createElement("button",{className:"invert animate alt small right",onClick:function(){return e.signin("signup")}},r.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))),r.a.createElement(je,{authorization:this.props.authorization,profile:this.props.profile}))))}}]),t}(n.Component);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _e=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleDarkMode=function(){"theme_dark"===a.props.profile.theme?a.props.setProfile(Ce({},a.props.profile,{theme:"theme_light"})):a.props.setProfile(Ce({},a.props.profile,{theme:"theme_dark"}))},a.changeTextSize=function(e){a.props.setProfile(Ce({},a.props.profile,{textSize:e}))},a.changeThemeColor=function(e){a.props.setProfile(Ce({},a.props.profile,{themeColor:e}))},a.login=function(e){a.props.history.push("/"+a.props.profile.tenant+"/login?type="+e)},a.toggleSettings=function(){a.setState({showSettings:!a.state.showSettings})},a.props.getProfile(),a.state={visible:!1,mobilemenu:"hide",chooseTheme:!1,showSettings:!1,transparentNavBar:!1,firstLoad:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;U().subscribe(function(t){"navbar-transparency"===t.name&&e.setState({transparentNavBar:t.signal}),"loggedin"===t.name&&e.setState({firstLoad:!1})})}},{key:"componentWillReceiveProps",value:function(e){this.state.firstLoad&&e.authorization&&e.authorization.isAuth&&this.setState({firstLoad:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"nav"},r.a.createElement(Pe,Object.assign({},this.props,{logout:this.props.logout,login:this.login,toggleSettings:this.toggleSettings,transparent:this.state.transparentNavBar})),r.a.createElement(Se,Object.assign({},this.props,{logout:this.props.logout,login:this.login,toggleSettings:this.toggleSettings,transparent:this.state.transparentNavBar})))}}]),t}(n.Component),Te=Object(p.b)(function(e){return{profile:e.profile}},{getProfile:de,setProfile:ge})(Object(K.b)(Object(N.withRouter)(_e)));a(285);function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t;a.setState(De({},a.state,(t={},Object(d.a)(t,e.currentTarget.name,e.currentTarget.value),Object(d.a)(t,"errorFields",De({},a.state.errorFields,Object(d.a)({},e.currentTarget.name,!1))),t)))},a.sentTenantUrl=function(){var e;(e={name:a.state.name},x(B.API_TENANT_URL,e,null).then(function(e){return Promise.resolve(e.status)})).then(function(e){R("notification",!0,200===e?{message:"Password sent successfully",type:"success",duration:3e3}:{type:"failure",message:"Invalid Email error",duration:3e3})}).catch(function(e){R("notification",!0,{type:"failure",message:"Bad request",duration:3e3})})},a.submit=function(e){e.preventDefault(),R("spinner");var t=Object(J.a)(a);a.clearError(),a.validate()&&ae({name:t.state.name}).then(function(e){200===e.status&&a.createTenant(e.data)})},a.handleImageChange=function(e){a.setState({banner:e.target.files[0]}),console.log(e.target.files[0])},a.createTenant=function(e){(function(e){var t=new FormData;return t.append("tenantName",e.tenantName),t.append("email",e.email),t.append("jwtPassword",e.jwtPassword),t.append("problem",re(e.password,e.solution,e.salt)),t.append("solution",e.solution),e.banner&&t.append("banner",e.banner,"banner.jpg"),x(B.API_URL_TENANT_CREATE,t,{"Content-Type":"multipart/form-data"}).then(function(e){return Promise.resolve(e)})})({tenantName:a.state.name,email:a.state.email,password:a.state.password,jwtPassword:a.state.jwtPassword,solution:e.solution,salt:e.salt,banner:a.state.banner}).then(function(e){200===e.status?(R("notification",!0,{type:"success",message:"Tenant has been created. You can proceed now",duration:3e3}),a.setState({pageNo:a.state.pageNo+1,created:!0})):R("notification",!0,{message:"We are facing some problem, please try after sometime",duration:3e3})}).catch(function(e){R("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})},a.gotoTenantPage=function(){a.props.history.push("/"+a.state.name+"/home")},a.props.getProfile(),a.state={name:"",email:"",password:"",repeatPassword:"",jwtPassword:"",banner:null,pageNo:1,created:!1,errorFields:{name:!1,email:!1,password:!1,repeatPassword:!1,jwtPassword:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"clearError",value:function(){this.setState({errorFields:{name:!1,email:!1,password:!1,repeatPassword:!1,jwtPassword:!1}})}},{key:"setError",value:function(e){this.setState({errorFields:De({},this.state.errorFields,Object(d.a)({},e,!0))})}},{key:"validate",value:function(){return oe(this.state.name)?(this.setError("name"),R("notification",!0,{type:"failure",message:"Tenant name cannot be empty",duration:3e3}),!1):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.state.email)?oe(this.state.password)?(this.setError("password"),R("notification",!0,{type:"failure",message:"Password cannot be empty",duration:3e3}),!1):this.state.password==this.state.repeatPassword||(this.setError("repeatPassword"),R("notification",!0,{type:"failure",message:"Password and repeat password should be same",duration:3e3}),!1):(this.setError("email"),R("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3}),!1)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tenant boxed"},!this.state.created&&r.a.createElement("div",{className:"typography-3 space-bottom-4"},"Tenant creation"),this.state.created&&r.a.createElement("div",{className:"typography-3 space-bottom-4"},"Tenant [",this.state.name,"] available now"),1===this.state.pageNo&&r.a.createElement("div",{className:"form"},r.a.createElement(Q,{id:"name",data:this.state,label:"Tenant Name",handleChange:function(t){return e.handleChange(t)},errorFields:this.state.errorFields}),r.a.createElement(Q,{id:"email",data:this.state,label:"Administrator Email",handleChange:function(t){return e.handleChange(t)},errorFields:this.state.errorFields}),r.a.createElement(Q,{id:"password",type:"password",data:this.state,label:"Administrator Password",handleChange:function(t){return e.handleChange(t)},errorFields:this.state.errorFields}),r.a.createElement(Q,{id:"repeatPassword",type:"password",data:this.state,label:"Repeat Password",handleChange:function(t){return e.handleChange(t)},errorFields:this.state.errorFields}),r.a.createElement(Q,{id:"jwtPassword",type:"password",data:this.state,label:"JWT Password",handleChange:function(t){return e.handleChange(t)},errorFields:this.state.errorFields}),r.a.createElement("label",{className:"file-upload space-top-1 space-bottom-4"},r.a.createElement("input",{type:"file",accept:"image/png, image/jpeg",onChange:this.handleImageChange,required:!0}),r.a.createElement("i",{className:"material-icons"},"add_photo_alternate"),!this.state.banner&&"Choose Banner/Cover Image",this.state.banner&&this.state.banner.name),r.a.createElement("div",{className:"action"},r.a.createElement("button",{className:"primary animate in right",onClick:this.submit},"Create Tenant"))),this.state.created&&r.a.createElement("button",{className:"primary animate out right",onClick:this.gotoTenantPage},"Take me to my tenant"))}}]),t}(r.a.Component),Ue={themecolor_1:Me("#69A7BF"),themecolor_2:Me("#99587B"),themecolor_3:Me("#A66C26"),themecolor_4:Me("#37AE82")};function Me(e){return Object(be.a)({palette:{primary:{main:e},secondary:{main:e}}})}var Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).logout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You have been logged out";a.props.removeAuth(),a.props.cookies.remove("isAuth"),a.props.cookies.remove("token"),a.props.cookies.remove("secret"),a.props.cookies.remove("name"),R("notification",!0,{type:t,message:n,duration:3e3})},a.props.getProfile(),a.props.getAuth(),a.state={authorization:{isAuth:!1},event:{},profile:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){U().subscribe()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(Y.HashRouter,null,r.a.createElement(fe,null),r.a.createElement(Ee,null),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"body-content"},r.a.createElement(we,null),r.a.createElement(ve.a,{theme:Ue.themecolor_1},r.a.createElement(Te,Object.assign({},this.props,{logout:function(){return e.logout},event:this.state.event})),r.a.createElement(N.Route,{path:"/:tenant/home",render:function(t){return r.a.createElement(H,Object.assign({},t,e.props,{logout:function(){return e.logout},event:e.state.event}))}}),r.a.createElement(N.Route,{path:"/:tenant/login",render:function(t){return r.a.createElement(ue,Object.assign({},t,e.props,{logout:function(){return e.logout},event:e.state.event}))}}),r.a.createElement(N.Route,{path:"/",exact:!0,render:function(t){return r.a.createElement(pe,Object.assign({},t,e.props,{logout:function(){return e.logout},event:e.state.event}))}}),r.a.createElement(N.Route,{path:"/home",exact:!0,render:function(t){return r.a.createElement(pe,Object.assign({},t,e.props,{logout:function(){return e.logout},event:e.state.event}))}}),r.a.createElement(N.Route,{path:"/tenant",exact:!0,render:function(t){return r.a.createElement(Re,Object.assign({},t,e.props,{logout:function(){return e.logout},event:e.state.event}))}}))))))}}]),t}(n.Component),Fe=Object(p.b)(function(e){return{authorization:e.authorization,profile:e.profile}},{getAuth:V,addAuth:q,removeAuth:$,getProfile:de,setProfile:ge})(Object(K.b)(Le)),ze=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:P},r.a.createElement(Fe,this.props))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(K.a,null,r.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t,a){e.exports=a.p+"static/media/mirror_white.ff53f974.svg"},60:function(e,t,a){},82:function(e,t,a){e.exports=a.p+"static/media/cover.b89312c7.jpg"},87:function(e,t,a){e.exports=a.p+"static/media/mirror_white_small.7aed2e38.svg"},88:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.d3f00f6b.chunk.js.map