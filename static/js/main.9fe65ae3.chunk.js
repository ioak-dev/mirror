(this.webpackJsonpmirror=this.webpackJsonpmirror||[]).push([[0],{133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},147:function(e,t,a){e.exports=a(311)},152:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},185:function(e,t){},187:function(e,t){},221:function(e,t){},222:function(e,t){},299:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(56),o=a.n(i),c=(a(152),a(23)),s=a(8),l=a(29),u=a(137),m=a(1),d={isAuth:!1,firstname:"",lastname:""},f={theme:"theme_light",tenant:""},h={users:[]},g={items:[],categories:[]},p={items:[],logs:[]},E={data:[]},b=Object(l.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AUTH":return console.log("GET_AUTH reducer"),Object(m.a)({},e);case"ADD_AUTH":return console.log("ADD_AUTH reducer"),Object(m.a)({},e,{},t.payload);case"REMOVE_AUTH":return console.log("REMOVE_AUTH reducer"),Object(m.a)({},e,{isAuth:!1,firstname:"",lastname:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return console.log("GET_PROFILE reducer"),Object(m.a)({},e);case"SET_PROFILE":return console.log("SET_PROFILE reducer"),Object(m.a)({},e,{},t.payload);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return console.log("GET_USER reducer"),Object(m.a)({},e);case"ADD_USER":return console.log("ADD_USER reducer"),Object(m.a)({},e,{},t.payload);case"FETCH_ALL_USERS":return console.log("FETCH_ALL_USERS reducer"),Object(m.a)({},e,{},t.payload);default:return e}},article:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ARTICLE":return console.log("FETCH_ARTICLE reducer"),Object(m.a)({},e,{},t.payload);default:return e}},request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REQUEST":return console.log("FETCH_REQUEST reducer"),Object(m.a)({},e,{},t.payload);default:return e}},stage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STAGE":return console.log("FETCH_STAGE reducer"),Object(m.a)({},e,{},t.payload);default:return e}}}),v=[u.a],y=Object(l.e)(b,{},Object(l.d)(l.a.apply(void 0,v))),N=(a(85),a(157),a(158),a(20)),w=a(142),O=a(316),j=a(317),A=a(58),_=a(7),P=a(138),S=a(139),R=a(144),k=a(140),C=a(145),T=(a(159),a(79)),q=a.n(T),L=a(2),I=(a(160),a(315)),U=a(143),F=new I.a(""),z=new U.a,D=function(e){var t=Object(n.useState)(""),a=Object(L.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){var e=F.subscribe((function(e){o(e)}));return function(){return e.unsubscribe()}}),[]);return r.a.createElement("form",{method:"GET",onSubmit:function(e){e.preventDefault(),z.next(i)},noValidate:!0},r.a.createElement("div",{className:"search-bar".concat(e.alt?" alt":"")},r.a.createElement("input",{name:"searchText",spellCheck:!1,autoComplete:"off",autoFocus:!0,placeholder:"Mirror, mirror, on the wall, who's the fairest of them all?",required:!0,value:i,onChange:function(e){F.next(e.target.value)}}),r.a.createElement("button",{className:"icon"},r.a.createElement("i",null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}))))))},x={API_URL_TENANT:"/tenant",API_URL_TENANT_BANNER:"/tenant/banner",API_URL_TENANT_CREATE:"/tenant/create",API_TENANT_URL:"/tenant/sendURL",API_URL_PRESIGNUP:"/auth/keys",API_URL_RESET:"/auth/reset",API_URL_CODE:"/auth/sendResetCode",API_URL_USER_DETAILS:"/user/details",API_URL_STAGE:"/stage",API_URL_PREDICT:"/model/predict",API_URL_ARTICLE:"/article",API_URL_CATEGORY:"/category",API_URL_FAQ:"/faq",API_URL_SR:"/servicerequests",API_URL_USER:"/user",API_URL:"/auth/",API_SIGNIN:"/signin",API_SIGNUP:"/signup",API_KEYS:"/keys",API_JWT:"/signin/jwt"},M=new U.a;function H(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;M.next({name:e,signal:t,data:a})}function B(){return M.asObservable()}var G=a(48),V=a.n(G),Q="https://mirror-service.herokuapp.com";function W(e,t){return V.a.get(Q+e,t)}function Y(e,t,a){return V.a.post(Q+e,t,a)}function J(e,t,a){return V.a.put(Q+e,t,a)}function $(e,t){return V.a.delete(Q+e,t)}a(94);var K=function(e){Object(n.useEffect)((function(){var e=document.documentElement.clientWidth,t=window.innerWidth-e;document.documentElement.style.setProperty("--scrollbar-width","".concat(t,"px"))}),[]),Object(n.useEffect)((function(){return H("dialog",e.visible),e.visible?document.body.classList.add("oak-dialog-open"):document.body.classList.remove("oak-dialog-open"),document.addEventListener("keydown",t,!1),function(){return document.removeEventListener("keydown",t,!1)}}),[e.visible]);var t=function(t){27===t.keyCode&&e.visible&&e.toggleVisibility()},a=function(){var t="";return t+=e.small?" small":"",t+=e.fullscreen?" fullscreen":""};return r.a.createElement("div",{className:"oak-dialog"},r.a.createElement("div",{className:e.visible?"dialog show ".concat(a()):"dialog hide ".concat(a())},r.a.createElement("div",{className:e.visible?"container":"container hidetext"},r.a.createElement("div",{className:"dialog-header"},r.a.createElement("div",{className:"container",onClick:e.toggleVisibility},r.a.createElement("i",{className:"material-icons"},"close"),r.a.createElement("div",{className:"text-esc"},"esc"))),e.children)))};function X(e){return null===e||null!==e.match(/^ *$/)}a(177);var Z=function(e){return r.a.createElement("button",{className:"oak-button ".concat(function(){var t=e.theme?e.theme:"";return t+=e.variant?" ".concat(e.variant):"",e.children||(t+=" icon"),t+=e.invert?" invert":"",t+=e.small?" small":"",t+=e.align?" align-".concat(e.align):""}()),onClick:e.action},e.icon&&r.a.createElement("i",{className:"material-icons"},e.icon),e.children&&e.children)},ee=function(e){return r.a.createElement(K,{small:!0,visible:e.visible,toggleVisibility:e.toggleVisibility},r.a.createElement("div",{className:"dialog-body typography-4 space-top-4 space-bottom-4"},e.text?e.text:"Are you sure you want to continue?"),r.a.createElement("div",{className:"dialog-footer"},e.children&&e.children,!e.children&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{action:e.toggleVisibility,theme:"default",variant:"animate in",align:"left"},r.a.createElement("i",{className:"material-icons"},"close"),"No"),r.a.createElement(Z,{action:function(){e.action(),e.toggleVisibility()},theme:"primary",variant:"animate out",align:"right"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Yes"))))},te=(a(178),function(e){return r.a.createElement("div",{className:"oak-text-field"},r.a.createElement("label",{htmlFor:e.id},e.label),!e.multiline&&r.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,id:e.id,value:e.data[e.id],onChange:e.handleChange}),e.multiline&&r.a.createElement("textarea",{disabled:e.disabled,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),id:e.id,name:e.id,value:e.data[e.id],onChange:e.handleChange}))}),ae=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(R.a)(this,Object(k.a)(t).call(this,e))).search=function(e){a.setState({searchTitle:e,requestId:void 0}),Y("/deeplearning/".concat(a.props.match.params.tenant).concat(x.API_URL_PREDICT),e,{headers:{Authorization:a.props.authorization.token}}).then((function(e){var t={};e.data.prediction.forEach((function(e){t[e.rank]=e.label})),W("".concat(x.API_URL_FAQ,"/").concat(a.props.match.params.tenant,"/category/").concat(t[e.data.prediction.length-1]),{headers:{Authorization:a.props.authorization.token}}).then((function(e){a.setState({searchResults:e.data.data})}))}))},a.handleScroll=function(){var e=window.pageYOffset,t=e<10;a.state.showMainSearchBar!==t&&H("show-navbar-element",!t),a.setState({prevScrollpos:e,showMainSearchBar:t})},a.notHelpful=function(){a.props.authorization&&a.props.authorization.token?a.toggleEditDialog():a.toggleNotLoggedInPrompt()},a.helpful=function(){console.log("not implemented")},a.toggleEditDialog=function(){a.setState({isCreateRequestDialogOpen:!a.state.isCreateRequestDialogOpen})},a.toggleNotLoggedInPrompt=function(){a.setState({isNotLoggedInPromptOpen:!a.state.isNotLoggedInPromptOpen})},a.redirectToLogin=function(){a.props.history.push("/".concat(a.props.match.params.tenant,"/login"))},a.handleChange=function(e){a.setState(Object(m.a)({},a.state,Object(_.a)({},e.target.name,e.target.value)))},a.addRequest=function(){var e=Object(A.a)(a.state.stages),t={title:a.state.searchTitle,description:a.state.searchDescription,priority:"Low",stage:e[0].name,status:"assigned"};X(t.title)?H("notification",!0,{type:"failure",message:"Title is missing",duration:5e3}):X(t.description)?H("notification",!0,{type:"failure",message:"Description is missing",duration:5e3}):J("".concat(x.API_URL_SR,"/").concat(a.props.match.params.tenant,"/main"),t,{headers:{Authorization:a.props.authorization.token}}).then((function(e){200===e.status&&(H("notification",!0,{type:"success",message:"Request created [".concat(e.data.data._id,"]"),duration:1e4}),a.toggleEditDialog(),a.setState({requestId:e.data.data._id}))}))},a.state={banner:null,prevScrollpos:window.pageYOffset,showMainSearchBar:!0,searchTitle:"",searchDescription:"",isCreateRequestDialogOpen:!1,isNotLoggedInPromptOpen:!1,searchResults:[],stages:[]},a}return Object(C.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",this.handleScroll),this.props.setProfile(Object(m.a)({},this.props.profile,{tenant:this.props.match.params.tenant})),W("".concat(x.API_URL_STAGE,"/").concat(this.props.match.params.tenant,"/"),{headers:{Authorization:this.props.authorization.token}}).then((function(t){e.setState({stages:t.data.stage})})).catch((function(e){console.log(e)})),z.subscribe((function(t){return e.search(t)}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a,n=this;e.authorization&&(t=this.props.match.params.tenant,a={headers:{Authorization:e.authorization.token}},W("".concat(x.API_URL_TENANT_BANNER,"/").concat(t),a).then((function(e){return Promise.resolve(e)}))).then((function(e){200===e.status&&e.data?n.setState({banner:"data:image/jpeg;base64,".concat(e.data)}):n.setState({banner:q.a})})).catch((function(){n.setState({banner:q.a})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),H("show-navbar-element",!1),F.next("")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"home full"},r.a.createElement(K,{visible:this.state.isCreateRequestDialogOpen,toggleVisibility:this.toggleEditDialog},r.a.createElement("div",{className:"dialog-body"},r.a.createElement(te,{label:"Title",data:this.state,id:"searchTitle",handleChange:function(t){return e.handleChange(t)}}),r.a.createElement(te,{label:"Description",data:this.state,id:"searchDescription",handleChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"dialog-footer"},r.a.createElement(Z,{action:this.toggleEditDialog,theme:"default",variant:"animate in",align:"left"},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),r.a.createElement(Z,{action:this.addRequest,theme:"primary",variant:"animate out",align:"right"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Create Service Request"))),r.a.createElement(ee,{action:this.redirectToLogin,visible:this.state.isNotLoggedInPromptOpen,toggleVisibility:this.toggleNotLoggedInPrompt,text:"You are not logged in. Do you want to login to submit a service request?"}),r.a.createElement("div",{className:"cover"},r.a.createElement("img",{src:this.state.banner,alt:"Red dot"})),this.state.showMainSearchBar&&r.a.createElement(D,null),r.a.createElement("div",{className:"search-results"},r.a.createElement("div",{className:"action-bar"},r.a.createElement(Z,{theme:"primary",action:this.helpful,variant:"animate in",align:"left"},"Helpful"),r.a.createElement(Z,{theme:"primary",variant:"animate in",align:"right",action:this.notHelpful},"Not Helpful")),this.state.searchResults&&this.state.searchResults.map((function(e){return r.a.createElement("div",{key:e.question,className:"result-record"},r.a.createElement("div",{className:"question typography-4 space-bottom-2"},e.question),r.a.createElement("div",{className:"answer typography-5"},e.answer))})),this.state.requestId&&r.a.createElement("div",{className:"request-created"},r.a.createElement("div",{className:"request-icon"},r.a.createElement("i",{className:"material-icons"},"file_copy")),r.a.createElement("div",{className:"request-id typography-4"},this.state.requestId),r.a.createElement("div",{className:"request-message typography-5"},"Your request has been created and an email has been sent to your inbox with details"))))}}]),t}(r.a.Component),ne=function(){return function(e){e({type:"GET_AUTH"})}},re=function(e){return function(t){t({type:"ADD_AUTH",payload:e})}},ie=function(){return function(e){e({type:"REMOVE_AUTH"})}},oe=(a(179),a(80)),ce=a.n(oe),se=a(81),le=a.n(se);function ue(e){return W(x.API_URL+e.name+x.API_KEYS,null).then((function(e){return Promise.resolve(e)}))}function me(e,t){try{var a=(n=e.password,r=JSON.stringify(t),ce.a.decrypt(n,r));return Y(x.API_URL+e.name+x.API_SIGNIN,{email:e.email,solution:a},null).then((function(e){return Promise.resolve(e)}))}catch(i){return"ccm: tag doesn't match"===i.message?Promise.resolve({status:401}):Promise.resolve(i)}var n,r}function de(e,t,a){var n={cipher:"aes",iter:"12000",ks:256,salt:le.a.enc.Base64.stringify(le.a.enc.Utf8.parse(a))};return ce.a.encrypt(e,t,n)}var fe=a(287),he=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:ne,addAuth:re,removeAuth:ie})(Object(c.b)((function(e){var t=Object(n.useState)({newuser:!1,name:"",email:"",password:"",repeatpassword:"",resetCode:""}),a=Object(L.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){if(e.location.search){var t=fe.parse(e.location.search);t&&"signup"===t.type&&o(Object(m.a)({},i,{newuser:!0})),t&&t.jwt&&c(t.jwt)}e.setProfile(Object(m.a)({},e.profile,{tenant:e.match.params.tenant}))}),[]);var c=function(t){(function(e){return Y(x.API_URL+e.tenantName+x.API_JWT,{jwtToken:e.jwt},null).then((function(e){return Promise.resolve(e)}))})({tenantName:e.match.params.tenant,jwt:t}).then((function(e){200===e.status?(H("notification",!0,{message:"Signed In successfully",type:"success",duration:3e3}),h(e.data)):500===e.status?H("notification",!0,{message:"Signature verification failed",type:"failure",duration:3e3}):H("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})})).catch((function(e){H("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}))},s=function(t){t.preventDefault(),H("notification",!1),H("spinner"),i.email&&i.password?function(e){return W("".concat(x.API_URL+e.name+x.API_KEYS,"/").concat(e.email),null).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e.response)}))}({name:e.profile.tenant,email:i.email}).then((function(t){200===t.status?me({name:e.profile.tenant,email:i.email,password:i.password},t.data).then((function(e){200===e.status?(H("notification",!0,{message:"Signed In successfully",type:"success",duration:3e3}),h(e.data)):401===e.status?H("notification",!0,{message:"Incorrect passphrase",type:"failure",duration:3e3}):H("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})})).catch((function(e){H("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})):404===t.status&&H("notification",!0,{message:"User name does not exist",type:"failure",duration:3e3})})):H("notification",!0,{type:"failure",message:"Username/password cannot be empty",duration:3e3})},l=function(t){if(t.preventDefault(),H("notification",!1),H("spinner"),i.name&&i.password&&i.email){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i.email))return void H("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3});ue({name:e.profile.tenant}).then((function(t){200===t.status&&function(e){return Y(x.API_URL+e.tenantName+x.API_SIGNUP,{email:e.email,problem:de(e.password,e.solution,e.salt),solution:e.solution,roles:[]},null).then((function(e){return Promise.resolve(e.status)}))}({tenantName:e.profile.tenant,email:i.email,password:i.password,solution:t.data.solution,salt:t.data.salt}).then((function(e){200===e&&(H("notification",!0,{type:"success",message:"Your account has been created. You can login now",duration:3e3}),o(Object(m.a)({},i,{email:"",password:"",name:"",repeatpassword:""})),f())})).catch((function(e){H("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}))}))}else i.name?i.email?i.password||H("notification",!0,{type:"failure",message:"Password cannot be empty",duration:3e3}):H("notification",!0,{type:"failure",message:"Email cannot be empty",duration:3e3}):H("notification",!0,{type:"failure",message:"Name cannot be empty",duration:3e3})},u=function(e){var t=1+99*Math.random();(function(e,t){return Y(x.API_URL_CODE,e,null).then((function(e){return Promise.resolve(e.status)}))})({email:i.email,resetCode:t}).then((function(t){200===t?"password"===e&&H("notification",!0,{message:"Password sent successfully",type:"success",duration:3e3}):H("notification",!0,{type:"failure",message:"Invalid Email error",duration:3e3})})).catch((function(e){H("notification",!0,{type:"failure",message:"Bad request",duration:3e3})}))},d=function(e){o(Object(m.a)({},i,Object(_.a)({},e.currentTarget.name,e.currentTarget.value)))},f=function(){o(Object(m.a)({},i,{newuser:!i.newuser}))},h=function(t){e.addAuth({isAuth:!0,token:t.token,secret:t.secret,name:t.name}),H("loggedin",!0),e.cookies.set("isAuth",!0),e.cookies.set("token",t.token),e.cookies.set("secret",t.secret),e.cookies.set("name",t.name),e.cookies.set("email",t.email),e.history.push("/")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login"},!i.newuser&&r.a.createElement("div",{className:"container"},r.a.createElement("form",{method:"GET",onSubmit:s,noValidate:!0},r.a.createElement("div",{className:"form"},r.a.createElement(te,{label:"E-mail",id:"email",data:i,handleChange:function(e){return d(e)}}),r.a.createElement(te,{label:"Password",type:"password",id:"password",data:i,handleChange:function(e){return d(e)}})),r.a.createElement("br",null),r.a.createElement(Z,{variant:"animate out",theme:"primary",action:s},"Sign In"),r.a.createElement("br",null)," ",r.a.createElement("br",null),"Don't have an account?"," ",r.a.createElement(Z,{theme:"default",variant:"animate in",small:!0,action:function(){return f()}},"Sign Up")),r.a.createElement("br",null),r.a.createElement(Z,{theme:"default",variant:"animate in",small:!0,action:function(){X(i.email)?H("notification",!0,{message:"Email cannot be empty",type:"failure",duration:5e3}):u("password")}},"Forgot password ?")),i.newuser&&r.a.createElement("div",{className:"container"},r.a.createElement("form",{method:"GET",onSubmit:l,noValidate:!0},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"form"},r.a.createElement(te,{label:"Name",id:"name",data:i,handleChange:function(e){return d(e)}}),r.a.createElement(te,{label:"E-mail",id:"email",data:i,handleChange:function(e){return d(e)}}),r.a.createElement(te,{label:"Password",type:"password",id:"password",data:i,handleChange:function(e){return d(e)}}),r.a.createElement(te,{label:"Repeat Password",type:"password",id:"repeatpassword",data:i,handleChange:function(e){return d(e)}})),r.a.createElement("br",null),r.a.createElement(Z,{theme:"primary",variant:"block",action:l},"Create Account"),r.a.createElement("br",null)," ",r.a.createElement("br",null),"Already have an account?"," ",r.a.createElement(Z,{theme:"secondary",variant:"block",action:f},"Sign In")))))}))),ge=(a(299),a(24)),pe=function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"space-bottom-4"},r.a.createElement("h3",null,"Mirror rorriM"),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," ","Magic Mirror on the wall, who now is the fairest one of all?"),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Magic Mirror"))," ","Over the seven jewelled hills, beyond the seventh fall, in the cottage of the seven dwarfs, dwells Snow White, fairest one of all."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," ","Snow White lies dead in the forest. The huntsman has brought me proof. [holds up her opened box] Behold, her heart."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Magic Mirror"))," ","Snow White still lives, the fairest in the land. Tis the heart of a pig you hold in your hand."),r.a.createElement("p",null,r.a.createElement("em",null,r.a.createElement("b",null,"Queen"))," ","[repulsed] The heart of a pig?! Then I've been tricked!")),r.a.createElement("div",{className:"action"},r.a.createElement(ge.a,{to:"/tenant",className:"navitem",activeClassName:"active"},r.a.createElement(Z,{theme:"primary",variant:"animate out"},"Create Tenant"))))},Ee=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:ne})((function(e){return Object(n.useEffect)((function(){e.getAuth()}),[e.authorization.isAuth]),r.a.createElement(r.a.Fragment,null,e.authorization.isAuth&&r.a.createElement(N.Route,{path:e.path,render:e.render}))})),be=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:ne,addAuth:re,removeAuth:ie})(Object(c.b)((function(e){return Object(n.useEffect)((function(){!e.authorization.isAuth&&e.cookies.get("isAuth")&&e.addAuth({isAuth:!0,token:e.cookies.get("token"),secret:e.cookies.get("secret"),name:e.cookies.get("name")}),e.getAuth()}),[e.authorization.isAuth]),r.a.createElement(r.a.Fragment,null)}))),ve=function(e,t){return function(a){W("".concat(x.API_URL_USER,"/").concat(e,"/all"),{headers:{Authorization:t.token}}).then((function(e){a({type:"FETCH_ALL_USERS",payload:{users:e.data.data}})}))}},ye=function(){return function(e){e({type:"GET_PROFILE"})}},Ne=function(e){return function(t){t({type:"SET_PROFILE",payload:e})}},we=function(){var e=Object(n.useState)(""),t=Object(L.a)(e,2),a=t[0],i=t[1];return Object(n.useEffect)((function(){var e=B().subscribe((function(e){"dialog"===e.name&&(e.signal?i("backdrop-fade"):i(""))}));return function(){return e.unsubscribe()}}),[]),r.a.createElement("div",{className:a})},Oe=(a(301),function(){var e=Object(n.useState)(!1),t=Object(L.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(null),c=Object(L.a)(o,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){var e=B().subscribe((function(e){"notification"===e.name&&(e.signal?(l(e.data),i(!1),e.data&&e.data.duration&&setTimeout((function(){H("notification",!1)}),e.data.duration)):l(null)),"spinner"===e.name&&i(e.signal)}));return function(){return e.unsubscribe()}}),[]),r.a.createElement(r.a.Fragment,null,s&&r.a.createElement("div",{className:"notification ".concat(null===s||void 0===s?void 0:s.type)},r.a.createElement("div",{className:"message"},null===s||void 0===s?void 0:s.message)),a&&r.a.createElement("div",{className:"lds-dual-ring"}))}),je=(a(55),a(40)),Ae=a.n(je),_e=function(e){return r.a.createElement("div",{className:"links"},e.authorization.isAuth&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{to:"/".concat(e.profile.tenant,"/home"),className:"navitem",activeClassName:"active"},"Home"),r.a.createElement(ge.a,{to:"/".concat(e.profile.tenant,"/article"),className:"navitem",activeClassName:"active"},"Articles"),r.a.createElement(ge.a,{to:"/".concat(e.profile.tenant,"/request"),className:"navitem",activeClassName:"active"},"Requests"),r.a.createElement(ge.a,{to:"/".concat(e.profile.tenant,"/useradministration"),className:"navitem",activeClassName:"active"},"Manage User"),r.a.createElement(ge.a,{to:"/".concat(e.profile.tenant,"/settings"),className:"navitem",activeClassName:"active"},"Settings")))},Pe=function(e){var t=Object(n.useState)(!1),a=Object(L.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){e.getProfile()}),[]),Object(n.useEffect)((function(){B().subscribe((function(e){"show-navbar-element"===e.name&&o(e.signal)}))}),[]);var c=function(t){e.login(t)};return r.a.createElement("div",{className:e.transparent?"navbar desktop transparent":"navbar desktop"},r.a.createElement("div",{className:"left"},!e.transparent&&"theme_light"===e.profile.theme&&r.a.createElement("img",{className:"logo",src:Ae.a,alt:"Curate logo"}),(e.transparent||"theme_dark"===e.profile.theme)&&r.a.createElement("img",{className:"logo",src:Ae.a,alt:"Curate logo"}),r.a.createElement(_e,{authorization:e.authorization,profile:e.profile}),i&&r.a.createElement(D,{alt:!0})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"action"},e.authorization.isAuth&&r.a.createElement(Z,{theme:"primary",variant:"animate out",invert:!0,small:!0,action:e.logout()},r.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!e.authorization.isAuth&&r.a.createElement(Z,{theme:"primary",variant:"animate in",invert:!0,align:"left",small:!0,action:function(){return c("signin")}},r.a.createElement("i",{className:"material-icons"},"person"),"Login"),!e.authorization.isAuth&&r.a.createElement(Z,{theme:"primary",variant:"animate in",invert:!0,align:"right",small:!0,action:function(){return c("signup")}},r.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))))},Se=a(84),Re=a.n(Se),ke=function(e){var t=Object(n.useState)({showSearchBar:!1,menu:!1}),a=Object(L.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){e.getProfile()}),[]),Object(n.useEffect)((function(){B().subscribe((function(e){"show-navbar-element"===e.name&&o(Object(m.a)({},i,{showSearchBar:e.signal}))}))}),[]);var c=function(){o(Object(m.a)({},i,{menu:!i.menu}))},s=function(t){e.login(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.transparent?"navbar mobile transparent":"navbar mobile"},r.a.createElement("div",{className:"left"},!i.showSearchBar&&!e.transparent&&"theme_light"===e.profile.theme&&r.a.createElement("img",{className:"logo",src:Ae.a,alt:"Mirror logo"}),!i.showSearchBar&&(e.transparent||"theme_dark"===e.profile.theme)&&r.a.createElement("img",{className:"logo",src:Ae.a,alt:"Mirror logo"}),i.showSearchBar&&!e.transparent&&"theme_light"===e.profile.theme&&r.a.createElement("img",{className:"logo",src:Re.a,alt:"Mirror logo"}),i.showSearchBar&&(e.transparent||"theme_dark"===e.profile.theme)&&r.a.createElement("img",{className:"logo",src:Re.a,alt:"Mirror logo"}),i.showSearchBar&&r.a.createElement(D,{alt:!0})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:i.menu?"menu active":"menu",onClick:c},r.a.createElement("div",null)))),r.a.createElement("div",{className:i.menu?"slider show":"slider hide",onClick:c},r.a.createElement("div",{className:i.menu?"container":"container hidetext",onClick:c},r.a.createElement("div",{className:"action"},r.a.createElement("div",{className:"buttons"},e.authorization.isAuth&&r.a.createElement(Z,{invert:!0,variant:"animate in",small:!0,action:e.logout()},r.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!e.authorization.isAuth&&r.a.createElement(Z,{invert:!0,variant:"animate in",small:!0,action:function(){return s("signin")}},r.a.createElement("i",{className:"material-icons"},"person"),"Login"),!e.authorization.isAuth&&r.a.createElement(Z,{invert:!0,variant:"animate in",small:!0,action:function(){return s("signup")}},r.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))),r.a.createElement(_e,{authorization:e.authorization,profile:e.profile}))))},Ce=Object(s.b)((function(e){return{profile:e.profile}}),{getProfile:ye,setProfile:Ne})(Object(c.b)(Object(N.withRouter)((function(e){var t=Object(n.useState)({visible:!1,mobilemenu:"hide",chooseTheme:!1,showSettings:!1,transparentNavBar:!1,firstLoad:!0}),a=Object(L.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){e.getProfile()}),[]),Object(n.useEffect)((function(){B().subscribe((function(e){"navbar-transparency"===e.name&&o(Object(m.a)({},i,{transparentNavBar:e.signal})),"loggedin"===e.name&&o(Object(m.a)({},i,{firstLoad:!1}))}))}),[]),Object(n.useEffect)((function(){i.firstLoad&&e.authorization&&e.authorization.isAuth&&o(Object(m.a)({},i,{firstLoad:!1}))}),[e.authorization.isAuth]);var c=function(t){e.history.push("/".concat(e.profile.tenant,"/login?type=").concat(t))},s=function(){o(Object(m.a)({},i,{showSettings:!i.showSettings}))};return r.a.createElement("div",{className:"nav"},r.a.createElement(Pe,Object.assign({},e,{logout:e.logout,login:c,toggleSettings:s,transparent:i.transparentNavBar})),r.a.createElement(ke,Object.assign({},e,{logout:e.logout,login:c,toggleSettings:s,transparent:i.transparentNavBar})))})))),Te=(a(302),function(e){var t=Object(n.useState)({name:"",email:"",password:"",repeatPassword:"",jwtPassword:"",pageNo:1,created:!1}),a=Object(L.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(null),s=Object(L.a)(c,2),l=s[0],u=s[1],d=Object(n.useState)({name:!1,email:!1,password:!1,repeatPassword:!1,jwtPassword:!1}),f=Object(L.a)(d,2),h=f[0],g=f[1];Object(n.useEffect)((function(){e.getProfile()}),[]);var p=function(e){o(Object(m.a)({},i,Object(_.a)({},e.currentTarget.name,e.currentTarget.value)))},E=function(e){g(Object(m.a)({},h,Object(_.a)({},e,!0)))},b=function(e){(function(e){var t=new FormData;return t.append("tenantName",e.tenantName),t.append("email",e.email),t.append("jwtPassword",e.jwtPassword),t.append("problem",de(e.password,e.solution,e.salt)),t.append("solution",e.solution),e.banner&&t.append("banner",e.banner,"banner.jpg"),Y(x.API_URL_TENANT_CREATE,t,{"Content-Type":"multipart/form-data"}).then((function(e){return Promise.resolve(e)}))})({tenantName:i.name,email:i.email,password:i.password,jwtPassword:i.jwtPassword,solution:e.solution,salt:e.salt,banner:l}).then((function(e){200===e.status?(H("notification",!0,{type:"success",message:"Tenant has been created. You can proceed now",duration:3e3}),o(Object(m.a)({},i,{pageNo:i.pageNo+1,created:!0}))):H("notification",!0,{message:"We are facing some problem, please try after sometime",duration:3e3})})).catch((function(e){H("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}))};return r.a.createElement("div",{className:"tenant boxed"},!i.created&&r.a.createElement("div",{className:"typography-3 space-bottom-4"},"Tenant creation"),i.created&&r.a.createElement("div",{className:"typography-3 space-bottom-4"},"Tenant [",i.name,"] available now"),1===i.pageNo&&r.a.createElement("div",{className:"form"},r.a.createElement(te,{id:"name",data:i,label:"Tenant Name",handleChange:function(e){return p(e)},errorFields:h}),r.a.createElement(te,{id:"email",data:i,label:"Administrator Email",handleChange:function(e){return p(e)},errorFields:h}),r.a.createElement(te,{id:"password",type:"password",data:i,label:"Administrator Password",handleChange:function(e){return p(e)},errorFields:h}),r.a.createElement(te,{id:"repeatPassword",type:"password",data:i,label:"Repeat Password",handleChange:function(e){return p(e)},errorFields:h}),r.a.createElement(te,{id:"jwtPassword",type:"password",data:i,label:"JWT Password",handleChange:function(e){return p(e)},errorFields:h}),r.a.createElement("label",{className:"file-upload space-top-1 space-bottom-4"},r.a.createElement("input",{type:"file",accept:"image/png, image/jpeg",onChange:function(e){u(e.target.files[0])},required:!0}),r.a.createElement("i",{className:"material-icons"},"add_photo_alternate"),!l&&"Choose Banner/Cover Image",l&&l.name),r.a.createElement("div",{className:"action"},r.a.createElement(Z,{theme:"primary",variant:"animate in",action:function(e){e.preventDefault(),H("spinner"),g({name:!1,email:!1,password:!1,repeatPassword:!1,jwtPassword:!1}),(X(i.name)?(E("name"),H("notification",!0,{type:"failure",message:"Tenant name cannot be empty",duration:3e3}),0):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i.email)?X(i.password)?(E("password"),H("notification",!0,{type:"failure",message:"Password cannot be empty",duration:3e3}),0):i.password===i.repeatPassword||(E("repeatPassword"),H("notification",!0,{type:"failure",message:"Password and repeat password should be same",duration:3e3}),0):(E("email"),H("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3}),0))&&ue({name:i.name}).then((function(e){200===e.status&&b(e.data)}))}},"Create Tenant"))),i.created&&r.a.createElement(Z,{theme:"primary",variant:"animate out",action:function(){e.history.push("/".concat(i.name,"/home"))}},"Take me to my tenant"))}),qe=(a(303),a(12)),Le=(a(304),function(e){var t=Object(n.useState)(!1),a=Object(L.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(!1),s=Object(L.a)(c,2),l=s[0],u=s[1],m=Object(n.useState)(),d=Object(L.a)(m,2),f=d[0],h=d[1],g=Object(n.useState)(),p=Object(L.a)(g,2),E=p[0],b=p[1],v=Object(n.useState)(),y=Object(L.a)(v,2),N=y[0],w=y[1],O=window.matchMedia("(max-width: 767px)");Object(n.useEffect)((function(){o(O.matches),O.addListener((function(){return o(O.matches)})),h(e.children);var t=B().subscribe((function(e){"sidebar"===e.name&&u(e.signal)}));return function(){return t.unsubscribe()}}),[]),Object(n.useEffect)((function(){h(e.children)}),[e.children]),Object(n.useEffect)((function(){j()}),[f]);var j=function(){r.a.Children.toArray(e.children).forEach((function(e){e.props.main?b(e):e.props.side&&w(e)}))},A=function(){H("sidebar",!l)};return r.a.createElement(r.a.Fragment,null,!i&&r.a.createElement("div",{className:"view-desktop"},N&&r.a.createElement("div",{className:"view-side"},N),r.a.createElement("div",{className:"view-content".concat(N?" side-present":"")},E)),i&&r.a.createElement("div",{className:"view-mobile"},r.a.createElement("div",{className:l?"slider show":"slider hide"},r.a.createElement("div",{className:"topbar",onClick:A},r.a.createElement("div",null,r.a.createElement(Z,{theme:"default",variant:"disabled",action:A},!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"material-icons"},"expand_more"),e.sideLabel?e.sideLabel:"Menu"),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"material-icons"},"expand_less"),"Collapse")))),r.a.createElement("div",{className:"view-side"},l&&N)),!l&&r.a.createElement("div",{className:"view-main"},E)))}),Ie=function(e){return r.a.createElement("div",null,e.children)},Ue=(a(305),function(e){var t=Object(n.useState)(!1),a=Object(L.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)([{}]),s=Object(L.a)(c,2),l=s[0],u=s[1];Object(n.useEffect)((function(){H("sidebarExpanded",i,{label:e.label})}),[i]),Object(n.useEffect)((function(){o(!!e.show),u(e.elements?e.elements:[]);var t=B().subscribe((function(t){"sidebarExpanded"===t.name&&t.signal&&t.data&&t.data.label!==e.label&&o(!1)}));return function(){return t.unsubscribe()}}),[]);var m=0,d=l.map((function(e){return r.a.createElement("div",{key:m+=1,className:"element",onClick:e.action},r.a.createElement("i",{className:"material-icons"},e.icon),e.label)}));return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:i?"header active":"header",onClick:function(){return o(!i)}},r.a.createElement("div",{className:"label"},r.a.createElement("i",{className:"material-icons"},e.icon),e.label,void 0!==e.number&&r.a.createElement("div",{className:"number"},e.number)),r.a.createElement("div",{className:"aria"},r.a.createElement("i",{className:i?"material-icons collapse":"material-icons"},"keyboard_arrow_left"))),r.a.createElement("div",{className:i?"content show ".concat(e.animate?"animate in":"static"):"content hide ".concat(e.animate?"animate in":"static")},d,e.children))}),Fe=(a(306),function(e,t){return function(a){W("".concat(x.API_URL_STAGE,"/").concat(e,"/"),{headers:{Authorization:t.token}}).then((function(e){a({type:"FETCH_STAGE",payload:{data:e.data.stage}})}))}}),ze=Object(s.b)((function(e){return{stage:e.stage}}),{fetchStage:Fe,saveStage:function(e,t,a){return function(n){return J("".concat(x.API_URL_STAGE,"/").concat(e,"/"),a,{headers:{Authorization:t.token}}).then((function(a){200===a.status&&(H("stages",!0,{action:"updated"}),n(Fe(e,t)))})).catch((function(e){401===e.response.status&&H("session expired")}))}}})((function(e){var t=Object(n.useState)([{name:""}]),a=Object(L.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){var e=B().subscribe((function(e){"stages"===e.name&&e.signal&&H("notification",!0,{type:"success",message:"".concat("stages"," ").concat(e.data.action),duration:5e3})}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){e.authorization.isAuth&&e.fetchStage(e.match.params.tenant,e.authorization)}),[]),Object(n.useEffect)((function(){e.authorization.isAuth&&e.fetchStage(e.match.params.tenant,e.authorization)}),[e.authorization.isAuth]),Object(n.useEffect)((function(){o(e.stage.data)}),[e.stage]);var c=function(e){return function(){o(i.filter((function(t,a){return e!==a})))}};return r.a.createElement("div",null,r.a.createElement("div",{className:"form"},r.a.createElement(Z,{theme:"secondary",variant:"animate out",align:"left",action:function(){o(i.concat([{name:""}]))}},r.a.createElement("i",{className:"material-icons"},"label_important"),"New Stage"),r.a.createElement(Z,{theme:"primary",variant:"animate out",align:"center",action:function(){e.saveStage(e.match.params.tenant,e.authorization,i)}},r.a.createElement("i",{className:"material-icons"},"save_alt"),"Save"),r.a.createElement(Z,{theme:"default",variant:"animate in",align:"right",action:function(){return e.fetchStage(e.match.params.tenant,e.authorization)}},r.a.createElement("i",{className:"material-icons"},"undo"),"Reset"),r.a.createElement("div",{className:"space-bottom-2"}),null===i||void 0===i?void 0:i.map((function(e,t){return r.a.createElement("div",{className:"stage-row",key:t},r.a.createElement("div",null,r.a.createElement(te,{id:"name",label:"Level ".concat(t+1),data:e,handleChange:function(e){return function(e,t){var a=Object(A.a)(i);a[t]=Object(m.a)({},a[t],{name:e.target.value}),o(a)}(e,t)}})),r.a.createElement("div",{className:"space-bottom-2"},r.a.createElement(Z,{theme:"secondary",variant:"animate in",action:c(t)},r.a.createElement("i",{className:"material-icons"},"delete"),"Remove")))})),(!i||0===i.length)&&r.a.createElement("div",null,"No custom stages defined")))})),De=function(e){var t={tenant:[{label:"Profile",action:function(){return s("tenantProfile")},icon:"home"},{label:"Support levels",action:function(){return s("stage")},icon:"fast_forward"},{label:"Training dataset",action:function(){return s("trainingDataset")},icon:"bubble_chart"},{label:"Article categories",action:function(){return s("articleCategories")},icon:"compare"}],myProfile:[{label:"Profile",action:function(){return s("userProfile")},icon:"person"},{label:"Password",action:function(){return s("userPassword")},icon:"security"}]},a=Object(n.useState)({name:"",email:"",jwtPassword:"",banner:qe.any,errorFields:{name:!1,email:!1,jwtPassword:!1},section:"tenantProfile"}),i=Object(L.a)(a,2),o=i[0],c=i[1];Object(n.useEffect)((function(){var t,a;e.authorization.isAuth&&(t=e.match.params.tenant,a={headers:{Authorization:e.authorization.token}},W("".concat(x.API_URL_TENANT,"/").concat(t),a).then((function(e){return Promise.resolve(e)}))).then((function(e){c(Object(m.a)({},o,{name:e.data.name,email:e.data.ownerEmail,jwtPassword:e.data.jwtPassword}))})),e.setProfile(Object(m.a)({},e.profile,{tenant:e.match.params.tenant}))}),[]);var s=function(e){c(Object(m.a)({},o,{section:e})),H("sidebar",!1)},l=function(e){c(Object(m.a)({},o,Object(_.a)({},e.currentTarget.name,e.currentTarget.value)))};return r.a.createElement("div",{className:"settings"},r.a.createElement(Le,{sideLabel:"More options"},r.a.createElement(Ie,{main:!0},"tenantProfile"===o.section&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3 space-bottom-2"},"Tenant Profile"),r.a.createElement("div",{className:"form"},r.a.createElement(te,{id:"email",data:o,label:"Administrator Email",handleChange:function(e){return l(e)},errorFields:o.errorFields}),r.a.createElement(te,{id:"jwtPassword",type:"password",data:o,label:"JWT Password",handleChange:function(e){return l(e)},errorFields:o.errorFields}),r.a.createElement("label",{className:"file-upload space-top-1 space-bottom-4"},r.a.createElement("input",{type:"file",accept:"image/png, image/jpeg",onChange:function(e){c(Object(m.a)({},o,{banner:e.target.files[0]}))},required:!0}),r.a.createElement("i",{className:"material-icons"},"add_photo_alternate"),!o.banner&&"Choose Banner/Cover Image",o.banner&&o.banner.name))),"stage"===o.section&&r.a.createElement("div",{className:"stage"},r.a.createElement(ze,{match:e.match,authorization:e.authorization})),"userProfile"===o.section&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3 space-bottom-2"},"User Profile")),"userPassword"===o.section&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3 space-bottom-2"},"Change Login Password"))),r.a.createElement(Ie,{side:!0},r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"section-main"},r.a.createElement(Ue,{label:"Tenant",elements:t.tenant,icon:"home",animate:!0}),r.a.createElement(Ue,{label:"My Profile",elements:t.myProfile,icon:"account_circle",animate:!0}))))))},xe=(a(133),function(e){return r.a.createElement("div",{className:"article-record"},r.a.createElement("div",{className:"item-container"},r.a.createElement("div",{className:"item-actions"},r.a.createElement("div",{className:"item-edit"},r.a.createElement("i",{onClick:function(){return e.editArticle(e.article)},className:"material-icons"},"edit")),r.a.createElement("div",{className:"item-delete"},r.a.createElement("i",{onClick:function(){return e.confirmDeleteFaq(e.article._id)},className:"material-icons"},"delete"))),r.a.createElement("div",{className:"item-content"},r.a.createElement("div",{className:"title typography-4"},e.article.question),r.a.createElement("div",{className:"typography-6"},e.article.answer),r.a.createElement("div",{className:"tag",key:e.article.category,onClick:function(){return e.search(e.article.category)}},e.article.category))))}),Me=(a(307),function(e){var t,a=Object(n.useState)(!1),i=Object(L.a)(a,2),o=i[0],c=i[1],s=function(t,a){t.target.name=e.id,t.target.value=a,e.handleChange(t),c(!o)},l=[];return e.elements?l=e.elements.map((function(e){return r.a.createElement("div",{className:"option",key:e,onClick:function(t){return s(t,e)}},e)})):e.objects&&(l=e.objects.map((function(e){return r.a.createElement("div",{className:"option",key:e.key,onClick:function(t){return s(t,e.key)}},e.value)}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"oak-select ".concat(function(){var t=e.theme?e.theme:"";return t+=e.variant?" ".concat(e.variant):"",t+=e.width?" ".concat(e.width):""}())},e.label&&r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("div",{className:"select-button",id:e.id,onClick:function(){return c(!o)}},e.elements&&r.a.createElement("div",null,e.data[e.id]),e.objects&&r.a.createElement("div",null,e.objects.find((function(t){return t.key===e.data[e.id]}))&&(null===(t=e.objects)||void 0===t?void 0:t.find((function(t){return t.key===e.data[e.id]})).value)),r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons"},"keyboard_arrow_down"))),r.a.createElement("div",{className:o?"dropdown show":"dropdown hide"},r.a.createElement("div",{className:"dropdown-content"},e.first&&r.a.createElement("div",{className:"option",onClick:function(t){return s(t,e.first)}},e.first),e.firstAction&&r.a.createElement("div",{className:"option",onClick:function(t){return s(t,e.firstAction)}},e.firstAction),l))))}),He=(a(308),function(e){var t=Object(n.useState)({rowsPerPage:6,pageNo:1}),a=Object(L.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){c()}),[i]);var c=function(){e.onChangePage(i.pageNo,i.rowsPerPage)};return r.a.createElement("div",{className:"oak-pagination"},r.a.createElement("div",{className:"space-right-3"},e.label?e.label:"Rows per page"),r.a.createElement("div",{className:"space-right-3"},r.a.createElement(Me,{data:i,id:"rowsPerPage",handleChange:function(e){return t=e,void o(Object(m.a)({},i,Object(_.a)({},t.target.name,t.target.value)));var t},elements:["6","10","20","50"]})),r.a.createElement("div",{className:"page-number space-right-3"},r.a.createElement("div",null,(i.pageNo-1)*i.rowsPerPage+1,"-"," ",i.pageNo*i.rowsPerPage<e.totalRows?i.pageNo*i.rowsPerPage:e.totalRows,"\xa0of\xa0 ",e.totalRows," ")),r.a.createElement("div",{className:"page-nav"},r.a.createElement("div",{className:"space-right-2"},r.a.createElement("i",{className:1===i.pageNo?"material-icons disabled":"material-icons",onClick:function(){1!==i.pageNo&&o(Object(m.a)({},i,{pageNo:i.pageNo-1}))}},"keyboard_arrow_left")),r.a.createElement("div",null,r.a.createElement("i",{className:Math.ceil(e.totalRows/i.rowsPerPage)===i.pageNo?"material-icons disabled":"material-icons",onClick:function(){Math.ceil(e.totalRows/i.rowsPerPage)!==i.pageNo&&o(Object(m.a)({},i,{pageNo:i.pageNo+1}))}},"keyboard_arrow_right"))))}),Be=function(e,t){return function(a){W("".concat(x.API_URL_FAQ,"/").concat(e,"/"),{headers:{Authorization:t.token}}).then((function(e){a({type:"FETCH_ARTICLE",payload:{items:e.data.faq,categories:e.data.category}})}))}},Ge=Object(s.b)((function(e){return{article:e.article}}),{fetchArticle:Be,saveArticle:function(e,t,a){return function(n){J("".concat(x.API_URL_FAQ,"/").concat(e,"/"),a,{headers:{Authorization:t.token}}).then((function(r){200===r.status&&(H("article",!0,{action:a.id?"updated":"created"}),n(Be(e,t)))})).catch((function(e){401===e.response.status&&H("session expired")}))}},deleteArticle:function(e,t,a){return function(n){$("".concat(x.API_URL_FAQ,"/").concat(e,"/").concat(a),{headers:{Authorization:t.token}}).then((function(a){200===a.status&&(H("article",!0,{action:"deleted"}),n(Be(e,t)))})).catch((function(e){401===e.response.status&&H("session expired")}))}}})((function(e){var t={article:[{label:"New article",action:function(){return d(!u)},icon:"add"}]},a=Object(n.useState)(!1),i=Object(L.a)(a,2),o=i[0],c=i[1],s=Object(n.useState)(!1),l=Object(L.a)(s,2),u=l[0],d=l[1],f=Object(n.useState)({id:void 0,category:"",question:"",answer:"",newCategory:""}),h=Object(L.a)(f,2),g=h[0],p=h[1],E=Object(n.useState)({pageNo:1,rowsPerPage:6}),b=Object(L.a)(E,2),v=b[0],y=b[1];Object(n.useEffect)((function(){var e=B().subscribe((function(e){"article"===e.name&&e.signal&&(H("notification",!0,{type:"success",message:"".concat("article"," ").concat(e.data.action),duration:5e3}),"deleted"!==e.data.action&&d(!u))}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){e.authorization.isAuth&&e.fetchArticle(e.match.params.tenant,e.authorization),e.setProfile(Object(m.a)({},e.profile,{tenant:e.match.params.tenant}))}),[]),Object(n.useEffect)((function(){e.authorization.isAuth&&e.fetchArticle(e.match.params.tenant,e.authorization)}),[e.authorization.isAuth]),Object(n.useEffect)((function(){u||p({id:void 0,category:"",question:"",answer:"",newCategory:""})}),[u]);var N=function(e){var t=g.category;"<create new>"===t&&(t=g.newCategory),d(!0),p({id:e._id,category:e.category,question:e.question,answer:e.answer,newCategory:""})},w=function(e){p(Object(m.a)({},g,Object(_.a)({},e.target.name,e.target.value)))},O=[];e.article.items&&(O=e.article.items.slice((v.pageNo-1)*v.rowsPerPage,v.pageNo*v.rowsPerPage));var j=O.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(xe,{id:e._id,article:e,editArticle:N,confirmDeleteFaq:function(){return t=e._id,p(Object(m.a)({},g,{id:t})),void c(!0);var t},search:function(){return e._id,void console.log("not implemented")}}),r.a.createElement("br",null))}));return r.a.createElement("div",{className:"article"},r.a.createElement(K,{visible:u,toggleVisibility:function(){return d(!u)}},r.a.createElement("div",{className:"dialog-body"},r.a.createElement("div",null,r.a.createElement(Me,{theme:"default",label:"Category",data:g,id:"category",handleChange:function(e){return w(e)},elements:e.article.categories,firstAction:"<create new>"})),r.a.createElement("div",null,"<create new>"===g.category&&r.a.createElement(te,{label:"Category name",data:g,id:"newCategory",handleChange:function(e){return w(e)}})),r.a.createElement(te,{label:"Question",data:g,id:"question",handleChange:function(e){return w(e)}}),r.a.createElement(te,{label:"Answer",data:g,id:"answer",handleChange:function(e){return w(e)}})),r.a.createElement("div",{className:"dialog-footer"},r.a.createElement(Z,{action:function(){return d(!u)},theme:"default",variant:"animate in",align:"left"},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),r.a.createElement(Z,{action:function(){return function(){var t=g.category;"<create new>"===t&&(t=g.newCategory);var a={id:g.id,question:g.question,answer:g.answer,category:t};X(a.category)?H("notification",!0,{type:"failure",message:"Category is missing",duration:5e3}):X(a.question)?H("notification",!0,{type:"failure",message:"Question is missing",duration:5e3}):(X(a.answer)&&(a.answer="unsorted"),e.saveArticle(e.match.params.tenant,e.authorization,a))}()},theme:"primary",variant:"animate out",align:"right"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Create"))),o,r.a.createElement(ee,{action:function(){e.deleteArticle(e.match.params.tenant,e.authorization,g.id)},visible:o,toggleVisibility:function(){return c(!o)}}),r.a.createElement(Le,{sideLabel:"More options"},r.a.createElement(Ie,{main:!0},r.a.createElement(He,{totalRows:e.article.items.length,onChangePage:function(e,t){y({pageNo:e,rowsPerPage:t})},label:"Items per page"}),j),r.a.createElement(Ie,{side:!0},r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"section-main"},r.a.createElement(Ue,{label:"Article",elements:t.article,icon:"add",animate:!0}),r.a.createElement(Ue,{label:"Search",icon:"search",animate:!0},"Search content goes here"))))))})),Ve=(a(309),function(e){var t=Object(n.useState)([]),a=Object(L.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)({pageNo:1,rowsPerPage:6,sortField:"",sortAsc:!0}),s=Object(L.a)(c,2),l=s[0],u=s[1],d=Object(n.useState)({}),f=Object(L.a)(d,2),h=f[0],g=f[1];Object(n.useEffect)((function(){o(e.data);var t={};e.header.forEach((function(e){t[e.key]=e})),g(t)}),[]),Object(n.useEffect)((function(){o(e.data)}),[e.data]),Object(n.useEffect)((function(){p()}),[l]);var p=function(){e.onChangePage?e.onChangePage(l.pageNo,l.rowsPerPage,l.sortField,l.sortAsc):l.sortField&&o(i.sort((function(e,t){return function(e,t){var a=l.sortField,n=l.sortAsc,r=h[a];if(!(null===r||void 0===r?void 0:r.dtype)||"string"===(null===r||void 0===r?void 0:r.dtype))return n?e[l.sortField]>t[l.sortField]?1:e[l.sortField]<t[l.sortField]?-1:0:e[l.sortField]<t[l.sortField]?1:e[l.sortField]>t[l.sortField]?-1:0;if(n)return e[l.sortField]-t[l.sortField]>0?1:e[l.sortField]-t[l.sortField]<0?-1:0;return e[l.sortField]-t[l.sortField]<0?1:e[l.sortField]-t[l.sortField]>0?-1:0}(e,t)})))};var E=function(e,t){u(Object(m.a)({},l,{pageNo:e,rowsPerPage:t}))},b=[];e.data&&e.totalRows?b=e.data:e.data&&!e.totalRows&&(b=e.data.slice((l.pageNo-1)*l.rowsPerPage,l.pageNo*l.rowsPerPage));var v=0;return r.a.createElement("div",{className:e.material?"oak-table material":"oak-table"},r.a.createElement("div",{className:"desktop-view"},r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:e.dense?"dense":""},r.a.createElement("thead",null,r.a.createElement("tr",null,e.header&&e.header.map((function(e){return r.a.createElement("th",{key:e.key},r.a.createElement("div",{className:"label",onClick:function(){return t=e.key,void u(Object(m.a)({},l,{sortField:t,sortAsc:l.sortField!==t||!l.sortAsc}));var t}},e.label,l.sortField===e.key&&l.sortAsc&&r.a.createElement("i",{className:"material-icons"},"keyboard_arrow_up"),l.sortField===e.key&&!l.sortAsc&&r.a.createElement("i",{className:"material-icons"},"keyboard_arrow_down")))})))),r.a.createElement("tbody",null,e.data&&b.map((function(t){return r.a.createElement("tr",{key:v+=1},e.header&&e.header.map((function(e){var a,n,i;return r.a.createElement("td",{key:v+=1,className:(null===(a=h[e.key])||void 0===a?void 0:a.dtype)?null===(n=h[e.key])||void 0===n?void 0:n.dtype:""},"date"===(null===(i=h[e.key])||void 0===i?void 0:i.dtype)?function(e){if(!e||/^\s*$/.test(e))return"";var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()," ").concat(t.getHours(),":").concat(t.getMinutes())}(t[e.key]):t[e.key])})))}))))),r.a.createElement(He,{onChangePage:E,totalRows:e.totalRows?e.totalRows:e.data.length})),r.a.createElement("div",{className:"mobile-view"},r.a.createElement("div",{className:"card-container"},e.data&&b.map((function(t){return r.a.createElement("div",{className:"card",key:v+=1},e.header&&e.header.map((function(e){return r.a.createElement("div",{key:v+=1},r.a.createElement("b",null,e.label),": ",t[e.key])})))}))),r.a.createElement(He,{onChangePage:E,totalRows:e.totalRows?e.totalRows:e.data.length,label:"Rows"})))}),Qe=(a(134),function(e,t){return function(a){W("".concat(x.API_URL_SR,"/").concat(e,"/main"),{headers:{Authorization:t.token}}).then((function(e){a({type:"FETCH_REQUEST",payload:{items:e.data.data}})}))}}),We=function(e,t,a){return function(n){W("".concat(x.API_URL_SR,"/").concat(e,"/log/").concat(a),{headers:{Authorization:t.token}}).then((function(e){n({type:"FETCH_REQUEST",payload:{logs:e.data.data}})}))}},Ye={_id:"",title:"",description:"",priority:""},Je=Object(s.b)((function(e){return{requestLog:e.request}}),{fetchRequestLog:We,saveRequestLog:function(e,t,a){return function(n){J("".concat(x.API_URL_SR,"/").concat(e,"/log")+"/".concat(a.requestId),{request_id:a.requestId,comments:a.comments},{headers:{Authorization:t.token}}).then((function(r){200===r.status&&(H("servicerequests log",!0,{action:a.id?"updated":"created"}),n(We(e,t,a.requestId)))})).catch((function(e){401===e.response.status&&H("session expired")}))}}})((function(e){var t,a=Object(n.useState)({request:Ye,log:"",nextStage:""}),i=Object(L.a)(a,2),o=i[0],c=i[1],s=Object(n.useState)(!1),l=Object(L.a)(s,2),u=l[0],d=l[1];Object(n.useEffect)((function(){var e=B().subscribe((function(e){"servicerequests log"===e.name&&e.signal&&(H("notification",!0,{type:"success",message:"".concat("servicerequests log"," ").concat(e.data.action),duration:5e3}),"deleted"!==e.data.action&&(d(!1),c(Object(m.a)({},o,{log:""}))))}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){e.request._id&&e.fetchRequestLog(e.match.params.tenant,e.authorization,e.request._id)}),[null===(t=e.request)||void 0===t?void 0:t._id]),Object(n.useEffect)((function(){var t="";e.user&&e.user.roles&&e.stages.some((function(t){return e.user.roles.indexOf(t.name)>=0}))&&(t=f()),c(Object(m.a)({},o,{request:e.request,nextStage:t}))}),[e.request]);var f=function(){if(e.request&&e.request.stage&&e.stages&&e.stages.length>0){var t=e.stages.findIndex((function(t){return t.name===e.request.stage}));return e.stages.length>t+1?e.stages[t+1].name:""}},h=function(e){c(Object(m.a)({},o,{request:Object(m.a)({},o.request,Object(_.a)({},e.target.name,e.target.value))}))},g=r.a.createElement(r.a.Fragment,null,!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{theme:"secondary",variant:"animate none",align:"right",icon:"forum",small:!0,action:function(){return d(!u)}},"Add Comment")),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{label:"Comments",multiline:!0,data:o,id:"log",handleChange:function(e){return t=e,void c(Object(m.a)({},o,Object(_.a)({},t.target.name,t.target.value)));var t}}),r.a.createElement(Z,{theme:"secondary",variant:"animate out",small:!0,align:"right",icon:"done",action:function(){var t={requestId:o.request._id,comments:o.log};X(t.comments[0])?H("notification",!0,{type:"failure",message:"Nothing to add",duration:5e3}):e.saveRequestLog(e.match.params.tenant,e.authorization,t)}},"Save Comment"),r.a.createElement(Z,{theme:"default",variant:"animate in",small:!0,align:"right",icon:"close",action:function(){return d(!u)}},"Cancel")),r.a.createElement("div",{className:"space-bottom-3"}));return r.a.createElement("div",{className:"view-request"},r.a.createElement(K,{fullscreen:!0,visible:e.editDialogOpen,toggleVisibility:e.toggleEditDialog},r.a.createElement("div",{className:"dialog-body"},r.a.createElement("div",{className:"typography-3 space-bottom-3"},"Request Details"),r.a.createElement("div",null,r.a.createElement(te,{label:"Request Id",data:o.request,disabled:!0,id:"_id",handleChange:function(e){return h(e)}}),r.a.createElement(te,{label:"Title",data:o.request,id:"title",handleChange:function(e){return h(e)}}),r.a.createElement(te,{label:"Description",data:o.request,id:"description",handleChange:function(e){return h(e)}}),r.a.createElement(Me,{label:"Priority",data:o.request,id:"priority",handleChange:function(e){return h(e)},elements:["Low","Medium","High"]})),r.a.createElement("div",{className:"typography-3 space-bottom-3 space-top-5"},"Comments and work log"),g,e.requestLog.logs&&e.requestLog.logs.length>0&&e.requestLog.logs.map((function(e){return r.a.createElement("div",{className:"comment space-bottom-2",key:e._id},r.a.createElement("div",{className:"comment-author typography-4 space-bottom-1"},e.lastModifiedByEmail),r.a.createElement("div",{className:"comment-text space-bottom-1"},e.comments),r.a.createElement("div",{className:"comment-date typography-6"},e.lastModifiedAt))})),e.requestLog.logs.length>10&&g),r.a.createElement("div",{className:"dialog-footer"},o.nextStage&&r.a.createElement(Z,{theme:"primary",variant:"outline",align:"left",icon:"person_add",action:function(){return function(t){var a=e.stages.findIndex((function(e){return e.name===t}));e.stages.length>a&&e.saveRequest({id:o.request._id,title:o.request.title,description:o.request.description,priority:o.request.priority,updateTime:(new Date).toLocaleString(),stage:t,previousStage:e.stages[a-1].name,assignedTo:e.match.params.tenant},!0)}(o.nextStage)}},"Assign to ",o.nextStage),r.a.createElement(Z,{theme:"primary",variant:"outline",align:"right",icon:"save",action:function(){e.saveRequest({id:o.request._id,title:o.request.title,description:o.request.description,priority:o.request.priority,assignedTo:e.match.params.tenant},!0)}},"Save Changes"))))})),$e=Object(s.b)((function(e){return{request:e.request,stage:e.stage}}),{fetchRequest:Qe,saveRequest:function(e,t,a){return function(n){J("".concat(x.API_URL_SR,"/").concat(e,"/main"),a,{headers:{Authorization:t.token}}).then((function(r){200===r.status&&(H("servicerequests",!0,{action:a.id?"updated":"created"}),n(Qe(e,t)))})).catch((function(e){401===e.response.status&&H("session expired")}))}},deleteRequest:function(e,t,a){return function(n){$("".concat(x.API_URL_FAQ,"/").concat(e,"/").concat(a),{headers:{Authorization:t.token}}).then((function(a){200===a.status&&(H("servicerequests",!0,{action:"deleted"}),n(Qe(e,t)))})).catch((function(e){401===e.response.status&&H("session expired")}))}},fetchStage:Fe})((function(e){var t,a={serviceRequest:[{label:"New Request",action:function(){return S()},icon:"add"}]},i={title:"",description:"",priority:"Low",status:"assigned"},o=Object(n.useState)(!1),c=Object(L.a)(o,2),s=c[0],l=c[1],u=Object(n.useState)(!1),d=Object(L.a)(u,2),f=d[0],h=d[1],g=Object(n.useState)({}),p=Object(L.a)(g,2),E=p[0],b=p[1],v=Object(n.useState)(i),y=Object(L.a)(v,2),N=y[0],w=y[1],O=Object(n.useState)([{}]),j=Object(L.a)(O,2),A=j[0],P=j[1];Object(n.useEffect)((function(){var e=B().subscribe((function(e){"servicerequests"===e.name&&e.signal&&(H("notification",!0,{type:"success",message:"".concat("servicerequests"," ").concat(e.data.action),duration:5e3}),"created"===e.data.action?l(!1):"updated"===e.data.action&&h(!1))}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){e.authorization.isAuth&&e.fetchRequest(e.match.params.tenant,e.authorization),e.fetchStage(e.match.params.tenant,e.authorization),e.setProfile(Object(m.a)({},e.profile,{tenant:e.match.params.tenant}))}),[]),Object(n.useEffect)((function(){e.authorization.isAuth&&e.fetchRequest(e.match.params.tenant,e.authorization)}),[e.authorization.isAuth]),Object(n.useEffect)((function(){var t=[];e.request.items.forEach((function(e){"assigned"===e.status?e.status=r.a.createElement("div",{className:"tag-2"},r.a.createElement("span",null,"Assigned_to_".concat(e.stage))):"progress"===e.status?e.status=r.a.createElement("div",{className:"tag-4"},r.a.createElement("span",null,"In_progress_with ".concat(e.stage))):"resolved"===e.status&&(e.status=r.a.createElement("div",{className:"tag-5"},r.a.createElement("span",null,"Resolved"))),t.push(Object(m.a)({},e,{action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{theme:"primary",variant:"block",align:"left",action:function(){return R(e)},icon:"open_in_new"}),"resolved"===e.status&&r.a.createElement(Z,{theme:"default",variant:"block",align:"right",action:""},r.a.createElement("i",{className:"material-icons"},"archive")))}))})),P(t)}),[e.request.items]);var S=function(){l(!s),b(i)},R=function(e){h(!0),b(e)},k=function(t){var a,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)if(X(t.title))H("notification",!0,{type:"failure",message:"Title is missing",duration:5e3});else if(X(t.description))H("notification",!0,{type:"failure",message:"Description is missing",duration:5e3});else{var r=n?t:Object(m.a)({},t,{stage:null===(a=e.stage)||void 0===a?void 0:a.data[0].name});e.saveRequest(e.match.params.tenant,e.authorization,r),b(r)}else H("notification",!0,{type:"failure",message:"Unknown error",duration:5e3})},C=function(e){w(Object(m.a)({},N,Object(_.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"requests"},r.a.createElement(K,{visible:s,toggleVisibility:function(){return S()}},r.a.createElement("div",{className:"dialog-body"},r.a.createElement(te,{label:"Title",data:N,id:"title",handleChange:function(e){return C(e)}}),r.a.createElement(te,{label:"Description",data:N,id:"description",handleChange:function(e){return C(e)}})),r.a.createElement("div",{className:"dialog-footer"},r.a.createElement(Z,{action:function(){return S()},theme:"default",variant:"animate in",align:"left"},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),r.a.createElement(Z,{action:function(){return k(Object(m.a)({},i,{title:N.title,description:N.description}),!1)},theme:"primary",variant:"animate out",align:"right"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Save"))),r.a.createElement(Je,Object.assign({},e,{editDialogOpen:f,toggleEditDialog:function(){h(!f)},saveRequest:k,request:E,stages:null===(t=e.stage)||void 0===t?void 0:t.data})),r.a.createElement(Le,{sideLabel:"More options"},r.a.createElement(Ie,{main:!0},r.a.createElement(Ve,{material:!0,data:A,header:[{key:"_id",label:"Request Number"},{key:"title",label:"Title"},{key:"description",label:"Description"},{key:"status",label:"Status"},{key:"category",label:"Category"},{key:"priority",label:"Priority"},{key:"createdAt",label:"Opened On",dtype:"date"},{key:"action",label:"Action"}]})),r.a.createElement(Ie,{side:!0},r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"section-main"},r.a.createElement(Ue,{label:"Service Request",elements:a.serviceRequest,icon:"add",animate:!0}),r.a.createElement(Ue,{label:"Search",icon:"search",animate:!0},"Search content goes here"))))))}));a(135),a(310);var Ke=function(e){return r.a.createElement("div",{className:"oak-check-box ".concat(function(){var t=e.theme?e.theme:"";return t+=e.variant?" ".concat(e.variant):""}())},r.a.createElement("div",{className:"container"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:e.id,checked:!!e.data[e.id],id:e.id,onChange:function(t){return(a=t).target.value=!!a.target.checked||"",void e.handleChange(a);var a}}),r.a.createElement("label",{className:"typography-5",htmlFor:e.id},e.label))))},Xe=function(e){var t=["tenantAdministrator","userAdministrator"],a=Object(n.useState)({administrativeRoles:{},supportRoles:{}}),i=Object(L.a)(a,2),o=i[0],c=i[1];Object(n.useEffect)((function(){e.setProfile(Object(m.a)({},e.profile,{tenant:e.match.params.tenant}))}),[]),Object(n.useEffect)((function(){if(e.user&&e.stages){var a={},n={};t.forEach((function(t){a[t]=!!(e.user.roles&&e.user.roles.indexOf(t)>=0)})),e.stages.forEach((function(t){n[t.name]=!!(e.user.roles&&e.user.roles.indexOf(t.name)>=0)})),c(Object(m.a)({},o,{administrativeRoles:a,supportRoles:n}))}}),[e.user,e.stages]);var s=function(e){c(Object(m.a)({},o,{supportRoles:Object(m.a)({},o.supportRoles,Object(_.a)({},e.target.name,e.target.value))}))},l=function(e){c(Object(m.a)({},o,{administrativeRoles:Object(m.a)({},o.administrativeRoles,Object(_.a)({},e.target.name,e.target.value))}))};return r.a.createElement("div",{className:"view-user"},r.a.createElement(K,{visible:e.isDialogOpen,toggleVisibility:e.toggleDialog},r.a.createElement("div",{className:"dialog-body"},e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-4"},"User Data"),r.a.createElement("div",{className:"basic-data"},r.a.createElement("div",{className:"label"},"Email"),r.a.createElement("div",{className:"value"},e.user.email),r.a.createElement("div",{className:"label"},"Full Name"),r.a.createElement("div",{className:"value"},"John Doe")),r.a.createElement("div",{className:"typography-4 space-top-3"},"Administrative Roles"),r.a.createElement("div",{className:"role-container"},r.a.createElement(Ke,{data:o.administrativeRoles,id:"tenantAdministrator",label:"Tenant Administrator",handleChange:l,theme:"primary"}),r.a.createElement(Ke,{data:o.administrativeRoles,id:"userAdministrator",label:"User Administrator",handleChange:l,theme:"primary"})),r.a.createElement("div",{className:"typography-4 space-top-3"},"Support Roles"),r.a.createElement("div",{className:"role-container"},e.stages.map((function(e){return r.a.createElement(Ke,{key:e.name,data:o.supportRoles,id:e.name,label:e.name,handleChange:s,theme:"primary"})}))))),r.a.createElement("div",{className:"dialog-footer"},r.a.createElement(Z,{theme:"primary",variant:"outline",align:"right",icon:"save",action:function(){var t=[];Object.keys(o.administrativeRoles).forEach((function(e){o.administrativeRoles[e]&&t.push(e)})),Object.keys(o.supportRoles).forEach((function(e){o.supportRoles[e]&&t.push(e)})),e.saveUser({id:e.user._id,roles:t},!0),e.toggleDialog()}},"Save Changes"))))},Ze=Object(s.b)((function(e){return{user:e.user,stage:e.stage}}),{fetchAllUsers:ve,saveUser:function(e,t,a){return function(n){J("".concat(x.API_URL_USER,"/").concat(e,"/"),a,{headers:{Authorization:t.token}}).then((function(r){200===r.status&&(H("user",!0,{action:a.id?"updated":"created"}),n(ve(e,t)))})).catch((function(e){401===e.response.status&&H("session expired")}))}},fetchStage:Fe})((function(e){var t=Object(n.useState)({pageNo:1,rowsPerPage:6}),a=Object(L.a)(t,2),i=(a[0],a[1],Object(n.useState)({searchCriteria:""})),o=Object(L.a)(i,2),c=o[0],s=o[1],l=Object(n.useState)([{}]),u=Object(L.a)(l,2),d=u[0],f=u[1],h=Object(n.useState)([{}]),g=Object(L.a)(h,2),p=g[0],E=g[1],b=Object(n.useState)(!1),v=Object(L.a)(b,2),y=v[0],N=v[1],w=Object(n.useState)(null),O=Object(L.a)(w,2),j=O[0],A=O[1];Object(n.useEffect)((function(){var e=B().subscribe((function(e){"user"===e.name&&e.signal&&H("notification",!0,{type:"success",message:"".concat("user"," ").concat(e.data.action),duration:5e3})}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){e.authorization.isAuth&&_(),e.setProfile(Object(m.a)({},e.profile,{tenant:e.match.params.tenant}))}),[]),Object(n.useEffect)((function(){e.authorization.isAuth&&_()}),[e.authorization.isAuth]);Object(n.useEffect)((function(){var t=[];e.user.users.forEach((function(e){t.push(Object(m.a)({},e,{action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{theme:"primary",variant:"block",align:"left",action:function(){return A(e),void N(!0)},icon:"open_in_new"}),"resolved"===e.status&&r.a.createElement(Z,{theme:"default",variant:"block",align:"right",action:""},r.a.createElement("i",{className:"material-icons"},"archive")))}))})),f(t),E(t)}),[e.user]);var _=function(){e.fetchAllUsers(e.match.params.tenant,e.authorization),e.fetchStage(e.match.params.tenant,e.authorization)};return r.a.createElement("div",{className:"user-administration boxed"},r.a.createElement(Xe,Object.assign({},e,{isDialogOpen:y,toggleDialog:function(){return N(!y)},saveUser:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?0!==t.roles.length?e.saveUser(e.match.params.tenant,e.authorization,t):H("notification",!0,{type:"failure",message:"No Roles selected",duration:5e3}):H("notification",!0,{type:"failure",message:"Unknown error",duration:5e3})},user:j,stages:e.stage.data})),r.a.createElement(Le,{sideLabel:"More options"},r.a.createElement(Ie,{main:!0},r.a.createElement("div",{className:"search-bar"},r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement(te,{label:"Search",data:c,handleChange:function(e){E(null===d||void 0===d?void 0:d.filter((function(t){return-1!==t.email.toLowerCase().indexOf(e.target.value)}))),s(Object(m.a)({},c,{searchCriteria:e.target.value}))},id:"searchCriteria"})),r.a.createElement("div",{className:"clear"},r.a.createElement(Z,{theme:"default",variant:"block",icon:"clear"}))),r.a.createElement(Ve,{material:!0,data:p,header:[{key:"_id",label:"User Id"},{key:"title",label:"Full Name"},{key:"email",label:"Email"},{key:"status",label:"Status"},{key:"roles",label:"Roles"},{key:"action",label:"Action"}]}))))})),et={themecolor1:tt("#69A7BF"),themecolor2:tt("#99587B"),themecolor3:tt("#A66C26"),themecolor4:tt("#37AE82")};function tt(e){return Object(O.a)({palette:{primary:{main:e},secondary:{main:e}}})}var at=Object(s.b)((function(e){return{authorization:e.authorization,user:e.user,profile:e.profile}}),{getAuth:ne,addAuth:re,removeAuth:ie,getProfile:ye,setProfile:Ne,getUser:function(){return function(e){e({type:"GET_USER"})}},addUser:function(e){return function(t){t({type:"ADD_USER",payload:e})}}})(Object(c.b)((function(e){Object(n.useEffect)((function(){e.getProfile(),e.getAuth(),e.getAuth()}),[]),Object(n.useEffect)((function(){var e=B().subscribe((function(e){"session expired"===e.name&&t(null,"failure","Session expired. Login again")}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){e.authorization&&e.authorization.token&&e.profile.tenant&&W("".concat(x.API_URL_USER,"/").concat(e.profile.tenant,"/"),{headers:{Authorization:e.authorization.token}}).then((function(t){e.addUser(t.data.data[0])}))}),[e.authorization]);var t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You have been logged out";e.removeAuth(),e.cookies.remove("isAuth"),e.cookies.remove("token"),e.cookies.remove("secret"),e.cookies.remove("name"),H("notification",!0,{type:a,message:n,duration:3e3})};return r.a.createElement("div",{className:"App"},r.a.createElement(w.HashRouter,null,r.a.createElement(be,null),r.a.createElement(we,null),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"body-content"},r.a.createElement(Oe,null),r.a.createElement(j.a,{theme:et.themecolor1},r.a.createElement(Ce,Object.assign({},e,{logout:function(){return t}})),r.a.createElement(N.Route,{path:"/:tenant/home",render:function(a){return r.a.createElement(ae,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(N.Route,{path:"/:tenant/login",render:function(a){return r.a.createElement(he,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(N.Route,{path:"/",exact:!0,render:function(a){return r.a.createElement(pe,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(N.Route,{path:"/home",exact:!0,render:function(a){return r.a.createElement(pe,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(N.Route,{path:"/tenant",exact:!0,render:function(a){return r.a.createElement(Te,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(Ee,{path:"/:tenant/settings",render:function(a){return r.a.createElement(De,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(Ee,{path:"/:tenant/article",render:function(a){return r.a.createElement(Ge,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(Ee,{path:"/:tenant/request",render:function(a){return r.a.createElement($e,Object.assign({},a,e,{logout:function(){return t}}))}}),r.a.createElement(Ee,{path:"/:tenant/useradministration",render:function(a){return r.a.createElement(Ze,Object.assign({},a,e,{logout:function(){return t}}))}}))))))}))),nt=function(e){return r.a.createElement(s.a,{store:y},r.a.createElement(at,e))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},40:function(e,t,a){e.exports=a.p+"static/media/mirror_white.ff53f974.svg"},55:function(e,t,a){},79:function(e,t,a){e.exports=a.p+"static/media/cover.b89312c7.jpg"},84:function(e,t,a){e.exports=a.p+"static/media/mirror_white_small.7aed2e38.svg"},85:function(e,t,a){},94:function(e,t,a){}},[[147,1,2]]]);
//# sourceMappingURL=main.9fe65ae3.chunk.js.map