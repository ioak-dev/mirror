import * as React from 'react';
import { mount } from 'enzyme';
import configureMockStore from 'redux-mock-store';

// import { ArticleController } from './ArticleController';

const mockStore = configureMockStore();
const store = mockStore({});

// jest.spyOn(React, 'useEffect').mockImplementation(f => f());

Object.defineProperty(window, 'matchMedia', {
  writable: true,
  value: jest.fn().mockImplementation(query => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: jest.fn(), // deprecated
    removeListener: jest.fn(), // deprecated
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
  })),
});

const article = {
  items: [
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1e',
      category: 'Popular Science',
      question:
        'Suspendisse mattis ligula et volutpat pulvinar. Maecenas sodales ut ligula sed lobortis',
      answer: 'Suspendisse mattis',
    },
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1a',
      category: 'Popular Science',
      question:
        'Suspendisse mattis ligula et volutpat pulvinar. Maecenas sodales ut ligula sed lobortis',
      answer: 'Suspendisse mattis',
    },
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1b',
      category: 'Popular Science',
      question:
        'Suspendisse mattis ligula et volutpat pulvinar. Maecenas sodales ut ligula sed lobortis',
      answer: 'Suspendisse mattis',
    },
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1c',
      category: 'Popular Science',
      question:
        'Suspendisse mattis ligula et volutpat pulvinar. Maecenas sodales ut ligula sed lobortis',
      answer: 'Suspendisse mattis',
    },
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1d',
      category: 'Popular Science',
      question:
        'Suspendisse mattis ligula et volutpat pulvinar. Maecenas sodales ut ligula sed lobortis',
      answer: 'Suspendisse mattis',
    },
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1f',
      category: 'Popular Science',
      question:
        'Suspendisse mattis ligula et volutpat pulvinar. Maecenas sodales ut ligula sed lobortis',
      answer: 'Suspendisse mattis',
    },
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1g',
      category: 'Popular Science',
      question:
        'Suspendisse mattis ligula et volutpat pulvinar. Maecenas sodales ut ligula sed lobortis',
      answer: 'Suspendisse mattis',
    },
  ],
  categories: ['Popular Science'],
};

describe('article controller component interaction', () => {
  const mockFn = jest.fn();

  // it('should load when initialized', () => {
  //   const wrapper = mount(
  //     // <Provider store={store}>
  //     <ArticleController
  //       match={{ params: { tenant: 'test' } }}
  //       setProfile={mockFn}
  //       profile={{}}
  //       authorization={{}}
  //       logout={mockFn}
  //       fetchArticle={mockFn}
  //       saveArticle={mockFn}
  //       deleteArticle={mockFn}
  //       article={article}
  //     />
  //     // </Provider>
  //   );
  //   expect(wrapper.find('.article')).toHaveLength(1);
  // });

  // it('should render 6 (default page size) articles', () => {
  //   const wrapper = mount(
  //     <ArticleController
  //       match={{ params: { tenant: 'test' } }}
  //       setProfile={mockFn}
  //       profile={{}}
  //       authorization={{}}
  //       logout={mockFn}
  //       fetchArticle={mockFn}
  //       saveArticle={mockFn}
  //       deleteArticle={mockFn}
  //       article={article}
  //     />
  //   );
  //   expect(wrapper.find('.item-container')).toHaveLength(6);
  // });
});
