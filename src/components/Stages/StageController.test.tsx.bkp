import * as React from 'react';
import { mount } from 'enzyme';
import configureMockStore from 'redux-mock-store';

// import { StageController } from './StageController';

const mockStore = configureMockStore();
const store = mockStore({});

// jest.spyOn(React, 'useEffect').mockImplementation(f => f());

Object.defineProperty(window, 'matchMedia', {
  writable: true,
  value: jest.fn().mockImplementation(query => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: jest.fn(), // deprecated
    removeListener: jest.fn(), // deprecated
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
  })),
});

const stage = {
  data: [
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1e',
      name: 'stage 1',
    },
    {
      _id: '5e04ae30d9e3d3bc0b7f8a1a',
      name: 'stage 2',
    },
  ],
  categories: ['Popular Science'],
};

describe('article controller component interaction', () => {
  const mockFn = jest.fn();

  // it('should load when initialized', () => {
  //   const wrapper = mount(
  //     // <Provider store={store}>
  //     <StageController
  //       match={{ params: { tenant: 'test' } }}
  //       setProfile={mockFn}
  //       profile={{}}
  //       authorization={{}}
  //       logout={mockFn}
  //       fetchStage={mockFn}
  //       saveStage={mockFn}
  //       deleteStage={mockFn}
  //       stage={stage}
  //     />
  //     // </Provider>
  //   );
  //   expect(wrapper.find('.stage')).toHaveLength(1);
  // });

  // it('should render 6 (default page size) articles', () => {
  //   const wrapper = mount(
  //     <StageController
  //       match={{ params: { tenant: 'test' } }}
  //       setProfile={mockFn}
  //       profile={{}}
  //       authorization={{}}
  //       logout={mockFn}
  //       fetchStage={mockFn}
  //       saveStage={mockFn}
  //       deleteStage={mockFn}
  //       stage={stage}
  //     />
  //   );
  //   expect(wrapper.find('.item-container')).toHaveLength(2);
  // });
});
